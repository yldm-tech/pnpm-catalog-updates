export const metadata = {
  title: 'Referencia de Comandos',
  description:
    'Gu√≠a de referencia completa para todos los comandos, opciones y patrones de uso de pnpm-catalog-updates.',
};

# Referencia de Comandos

Referencia completa para todos los comandos y opciones de PCU. Aprende sobre cada comando, flag y opci√≥n de configuraci√≥n disponible. {{ className: 'lead' }}

## Resumen de Comandos

PCU proporciona varios comandos principales con nombres completos y atajos convenientes:

| Comando Completo | Atajos y Alias                            | Descripci√≥n                                             |
| ---------------- | ----------------------------------------- | ------------------------------------------------------- |
| `pcu init`       | `pcu i`                                   | Inicializar workspace PNPM y configuraci√≥n PCU          |
| `pcu check`      | `pcu chk`, `pcu -c`, `pcu --check`        | Verificar dependencias de cat√°logo desactualizadas      |
| `pcu update`     | `pcu u`, `pcu -u`, `pcu --update`         | Actualizar dependencias de cat√°logo                     |
| `pcu analyze`    | `pcu a`, `pcu -a`, `pcu --analyze`        | Analizar impacto de actualizaciones de dependencias     |
| `pcu ai`         | -                                         | Gesti√≥n de proveedores AI y pruebas de an√°lisis         |
| `pcu workspace`  | `pcu w`, `pcu -s`, `pcu --workspace-info` | Mostrar informaci√≥n y validaci√≥n del workspace          |
| `pcu theme`      | `pcu t`, `pcu -t`, `pcu --theme`          | Configurar temas de color y configuraciones UI          |
| `pcu security`   | `pcu sec`                                 | Escaneo y correcciones de vulnerabilidades de seguridad |
| `pcu cache`      | -                                         | Gesti√≥n de cach√© (estad√≠sticas y limpieza)              |
| `pcu rollback`   | -                                         | Revertir actualizaciones de cat√°logo a un estado anterior |
| `pcu watch`      | -                                         | Vigilar cambios y verificar actualizaciones autom√°ticamente |
| `pcu help`       | `pcu h`, `pcu -h`                         | Mostrar informaci√≥n de ayuda                            |

### Atajos Especiales

| Atajo                  | Comando Equivalente        | Descripci√≥n                                                |
| ---------------------- | -------------------------- | ---------------------------------------------------------- |
| `pcu -i`               | `pcu update --interactive` | Modo de actualizaci√≥n interactiva                          |
| `pcu --security-audit` | `pcu security`             | Ejecutar escaneo de seguridad                              |
| `pcu --security-fix`   | `pcu security --fix-vulns` | Ejecutar escaneo de seguridad con correcciones autom√°ticas |

---

## Modo H√≠brido

PCU incluye **Modo H√≠brido** - cuando ejecutas cualquier comando sin flags, entra autom√°ticamente en modo interactivo para guiarte a trav√©s de las opciones.

<CodeGroup>

```bash {{ title: 'Sin Flags = Prompts Interactivos' }}
pcu check        # Prompts para formato, target, opciones de filtro
pcu update       # Prompts para cat√°logo, formato, target, etc.
pcu security     # Prompts para formato de salida, filtro de severidad
```

```bash {{ title: 'Con Flags = Ejecuci√≥n Directa' }}
pcu check --format table    # Se ejecuta directamente con opciones especificadas
pcu update --target minor   # Se ejecuta directamente con opciones especificadas
```

</CodeGroup>

### Comandos Soportados

El modo h√≠brido est√° disponible para los siguientes comandos:

| Comando      | Opciones Interactivas                               |
| ------------ | --------------------------------------------------- |
| `check`      | Formato, target, prerelease, patrones include/exclude |
| `update`     | Cat√°logo, formato, target, backup, dry-run          |
| `analyze`    | Formato                                             |
| `workspace`  | Validaci√≥n, estad√≠sticas, formato                   |
| `theme`      | Selecci√≥n de tema, estilo de progreso               |
| `security`   | Formato, severidad, auto-fix                        |
| `init`       | Plantilla, opciones de framework, asistente interactivo |
| `ai`         | Estado de proveedor, prueba, operaciones de cach√©   |
| `cache`      | Selecci√≥n de estad√≠sticas/limpiar                   |
| `rollback`   | Selecci√≥n de versi√≥n, formato                       |
| `watch`      | Intervalo, formato, opciones de notificaci√≥n        |

### Beneficios

- **Flexibilidad**: Cambio fluido entre automatizaci√≥n para scripts y gu√≠a interactiva para exploraci√≥n
- **Descubribilidad**: Explora funciones disponibles a trav√©s de prompts interactivos sin memorizar todas las opciones
- **Eficiencia**: Usuarios avanzados usan flags directamente mientras nuevos usuarios obtienen experiencia guiada

---

## `pcu init` - Inicializar Workspace

Inicializar un entorno completo de workspace PNPM con configuraci√≥n PCU.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu init
pcu i
```

```bash {{ title: 'Con Opciones' }}
pcu init --force --verbose
pcu init --workspace ./mi-proyecto
pcu init --no-create-workspace
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--force" type="boolean">
    Sobrescribir archivo de configuraci√≥n existente sin confirmaci√≥n
  </Property>
  <Property name="--full" type="boolean">
    Generar configuraci√≥n comprensiva con todas las opciones disponibles
  </Property>
  <Property name="--interactive" type="boolean">
    Lanzar asistente de configuraci√≥n interactivo con configuraci√≥n guiada
  </Property>
  <Property name="--template" type="enum">
    Plantilla de configuraci√≥n: minimal, standard, full, monorepo, enterprise
  </Property>
  <Property name="--create-workspace" type="boolean" default="true">
    Crear estructura de workspace PNPM si falta
  </Property>
  <Property name="--no-create-workspace" type="boolean">
    Omitir creaci√≥n de estructura de workspace PNPM
  </Property>
  <Property name="--packages-dir" type="string" default="packages">
    Nombre de directorio para paquetes del workspace
  </Property>
  <Property name="--package-rules" type="boolean" default="true">
    Incluir reglas de paquetes comunes en configuraci√≥n
  </Property>
  <Property name="--typescript" type="boolean">
    Agregar reglas de paquetes y configuraciones espec√≠ficas de TypeScript
  </Property>
  <Property name="--react" type="boolean">
    Agregar reglas de paquetes del ecosistema React
  </Property>
  <Property name="--vue" type="boolean">
    Agregar reglas de paquetes del ecosistema Vue
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, yaml, minimal
  </Property>
  <Property name="-w, --workspace" type="string">
    Directorio del workspace (predeterminado: directorio actual)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada y progreso
  </Property>
</Properties>

### Plantillas Disponibles

PCU incluye plantillas predefinidas para diferentes tipos de proyectos:

#### Minimal

```json
{
  "defaults": {
    "target": "minor"
  }
}
```

#### Standard

```json
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "packageRules": [
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    }
  ]
}
```

#### Full

Configuraci√≥n comprensiva con todas las caracter√≠sticas habilitadas.

#### Monorepo

Configuraci√≥n optimizada para workspaces grandes con m√∫ltiples paquetes.

#### Enterprise

Configuraci√≥n orientada a empresas con caracter√≠sticas de seguridad y cumplimiento.

### Ejemplos

<CodeGroup>

```bash {{ title: 'Inicializaci√≥n B√°sica' }}
# Inicializar con configuraci√≥n por defecto
pcu init

# Usar plantilla espec√≠fica
pcu init --template monorepo

# Modo interactivo
pcu init --interactive
```

```bash {{ title: 'Configuraci√≥n Personalizada' }}
# Configuraci√≥n espec√≠fica de framework
pcu init --react --typescript

# Con directorio personalizado
pcu init --packages-dir libs --workspace ./mi-monorepo

# Configuraci√≥n completa
pcu init --full --verbose
```

</CodeGroup>

---

## `pcu check` - Verificar Actualizaciones

Verificar dependencias de cat√°logo desactualizadas sin realizar actualizaciones.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu check
pcu chk
pcu -c
```

```bash {{ title: 'Con Filtros' }}
pcu check --include "react*"
pcu check --exclude "typescript"
pcu check --catalog default
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--catalog" type="string">
    Verificar cat√°logo espec√≠fico (predeterminado: todos los cat√°logos)
  </Property>
  <Property name="--include" type="string">
    Incluir solo paquetes que coincidan con el patr√≥n (separados por coma)
  </Property>
  <Property name="--exclude" type="string">
    Excluir paquetes que coincidan con el patr√≥n (separados por coma)
  </Property>
  <Property name="--target" type="enum" default="latest">
    Objetivo de actualizaci√≥n: latest, greatest, minor, patch, newest
  </Property>
  <Property name="--prerelease" type="boolean">
    Incluir versiones de prelanzamiento
  </Property>
  <Property name="--dev" type="boolean">
    Verificar solo dependencias de desarrollo
  </Property>
  <Property name="--prod" type="boolean">
    Verificar solo dependencias de producci√≥n
  </Property>
  <Property name="--outdated-only" type="boolean">
    Mostrar solo paquetes desactualizados
  </Property>
  <Property name="--limit" type="number">
    Limitar n√∫mero de paquetes mostrados
  </Property>
  <Property name="--sort" type="enum" default="name">
    Ordenar por: name, current, latest, age, severity
  </Property>
  <Property name="--security" type="boolean">
    Verificar solo paquetes con vulnerabilidades de seguridad
  </Property>
  <Property name="--dry-run" type="boolean">
    Mostrar qu√© se verificar√≠a sin ejecutar verificaciones
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, yaml, csv, minimal
  </Property>
  <Property name="-o, --output" type="string">
    Escribir salida a archivo
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada incluyendo notas de lanzamiento
  </Property>
  <Property name="--no-color" type="boolean">
    Deshabilitar salida a color
  </Property>
</Properties>

### Formatos de Salida

#### Table (Predeterminado)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Package         ‚îÇ Current ‚îÇ Latest  ‚îÇ Type     ‚îÇ Catalog    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ react           ‚îÇ 18.2.0  ‚îÇ 18.3.1  ‚îÇ minor    ‚îÇ default    ‚îÇ
‚îÇ typescript      ‚îÇ 5.0.4   ‚îÇ 5.2.2   ‚îÇ minor    ‚îÇ default    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### JSON

```json
{
  "packages": [
    {
      "name": "react",
      "current": "18.2.0",
      "latest": "18.3.1",
      "type": "minor",
      "catalog": "default"
    }
  ],
  "summary": {
    "total": 1,
    "outdated": 1
  }
}
```

### Ejemplos

<CodeGroup>

```bash {{ title: 'Verificaciones B√°sicas' }}
# Verificar todos los paquetes
pcu check

# Solo paquetes desactualizados
pcu check --outdated-only

# Con l√≠mite
pcu check --limit 10
```

```bash {{ title: 'Filtrado' }}
# Verificar solo React
pcu check --include "react*"

# Excluir tipos TypeScript
pcu check --exclude "@types/*"

# Solo dependencias de producci√≥n
pcu check --prod
```

```bash {{ title: 'Diferentes Formatos' }}
# Salida JSON
pcu check --format json

# Guardar en archivo
pcu check --output dependencies.json

# CSV para an√°lisis
pcu check --format csv --output report.csv
```

</CodeGroup>

---

## `pcu update` - Actualizar Dependencias

Actualizar dependencias de cat√°logo a versiones m√°s nuevas.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu update
pcu u
pcu -u
```

```bash {{ title: 'Modo Interactivo' }}
pcu update --interactive
pcu -i
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--catalog" type="string">
    Actualizar cat√°logo espec√≠fico
  </Property>
  <Property name="--include" type="string">
    Incluir solo paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--exclude" type="string">
    Excluir paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--target" type="enum" default="latest">
    Objetivo de actualizaci√≥n: latest, greatest, minor, patch, newest
  </Property>
  <Property name="--interactive" type="boolean">
    Modo interactivo para seleccionar paquetes
  </Property>
  <Property name="--dry-run" type="boolean">
    Mostrar qu√© se actualizar√≠a sin realizar cambios
  </Property>
  <Property name="--force" type="boolean">
    Actualizar sin confirmaci√≥n
  </Property>
  <Property name="--create-backup" type="boolean">
    Crear respaldo antes de actualizar
  </Property>
  <Property name="--prerelease" type="boolean">
    Incluir versiones de prelanzamiento
  </Property>
  <Property name="--dev" type="boolean">
    Actualizar solo dependencias de desarrollo
  </Property>
  <Property name="--prod" type="boolean">
    Actualizar solo dependencias de producci√≥n
  </Property>
  <Property name="--workspace" type="string">
    Actualizar paquetes espec√≠ficos del workspace
  </Property>
  <Property name="--concurrency" type="number" default="5">
    N√∫mero de actualizaciones concurrentes
  </Property>
  <Property name="--timeout" type="number" default="30000">
    Timeout para operaciones de red (ms)
  </Property>
  <Property name="--ignore-scripts" type="boolean">
    Omitir scripts de instalaci√≥n
  </Property>
  <Property name="--skip-install" type="boolean">
    Solo actualizar cat√°logos, omitir instalaci√≥n de paquetes
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, yaml, minimal
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada del progreso
  </Property>
</Properties>

### Targets de Actualizaci√≥n

<Properties>
  <Property name="latest" type="string">
    √öltima versi√≥n estable disponible
  </Property>
  <Property name="greatest" type="string">
    Versi√≥n m√°s alta disponible (incluyendo prereleases si se especifica)
  </Property>
  <Property name="minor" type="string">
    √öltima versi√≥n minor compatible
  </Property>
  <Property name="patch" type="string">
    √öltima versi√≥n patch compatible
  </Property>
  <Property name="newest" type="string">
    Versi√≥n m√°s nueva independientemente de restricciones semver
  </Property>
</Properties>

### Ejemplos

<CodeGroup>

```bash {{ title: 'Actualizaciones B√°sicas' }}
# Actualizar todos los paquetes
pcu update

# Solo actualizaciones minor
pcu update --target minor

# Con respaldo
pcu update --create-backup
```

```bash {{ title: 'Actualizaciones Selectivas' }}
# Modo interactivo
pcu update --interactive

# Solo React ecosystem
pcu update --include "react*"

# Excluir tipos TypeScript
pcu update --exclude "@types/*"
```

```bash {{ title: 'Opciones Avanzadas' }}
# Previsualizar cambios
pcu update --dry-run

# Actualizaci√≥n forzada
pcu update --force --target latest

# Solo cat√°logo espec√≠fico
pcu update --catalog default
```

</CodeGroup>

### Modo Interactivo

El modo interactivo permite seleccionar manualmente qu√© paquetes actualizar:

```bash
pcu update --interactive
```

Caracter√≠sticas del modo interactivo:

- ‚úÖ Selecci√≥n individual de paquetes
- üéØ Selecci√≥n de versiones espec√≠ficas
- üìä Vista previa de impacto de cambios
- üîí Creaci√≥n autom√°tica de respaldos
- üìù Notas de lanzamiento en l√≠nea

---

## `pcu analyze` - Analizar Impacto

Analizar el impacto de actualizar dependencias espec√≠ficas.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu analyze [catalog] [package] [version]
pcu a default react 18.3.0
```

```bash {{ title: 'An√°lisis M√∫ltiple' }}
pcu analyze --include "react*"
pcu analyze --workspace apps/web
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="catalog" type="string" required>
    Nombre del cat√°logo a analizar
  </Property>
  <Property name="package" type="string">
    Paquete espec√≠fico a analizar
  </Property>
  <Property name="version" type="string">
    Versi√≥n espec√≠fica a analizar
  </Property>
  <Property name="--include" type="string">
    Incluir paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--exclude" type="string">
    Excluir paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--workspace" type="string">
    Analizar impacto en workspace espec√≠fico
  </Property>
  <Property name="--depth" type="number" default="3">
    Profundidad de an√°lisis de dependencias
  </Property>
  <Property name="--show-breaking" type="boolean">
    Mostrar cambios potencialmente disruptivos
  </Property>
  <Property name="--show-peer-deps" type="boolean">
    Incluir an√°lisis de peer dependencies
  </Property>
  <Property name="--security-impact" type="boolean">
    Incluir an√°lisis de impacto de seguridad
  </Property>
  <Property name="--performance-impact" type="boolean">
    Estimar impacto en rendimiento (tama√±o del bundle)
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, yaml, graph
  </Property>
  <Property name="-o, --output" type="string">
    Guardar an√°lisis en archivo
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar an√°lisis detallado
  </Property>
</Properties>

### Tipos de An√°lisis

#### An√°lisis de Dependencias

- Dependencias directas e indirectas afectadas
- Conflictos potenciales de versiones
- Dependencias circulares

#### An√°lisis de Compatibilidad

- Cambios disruptivos detectados
- Compatibilidad de peer dependencies
- Requisitos de versi√≥n de Node.js

#### An√°lisis de Seguridad

- Vulnerabilidades corregidas
- Nuevas vulnerabilidades introducidas
- Impacto en superficie de ataque

#### An√°lisis de Rendimiento

- Cambios en tama√±o del bundle
- Impacto en tiempo de compilaci√≥n
- Dependencias agregadas/removidas

### Ejemplos

<CodeGroup>

```bash {{ title: 'An√°lisis B√°sico' }}
# Analizar actualizaci√≥n espec√≠fica
pcu analyze default react 18.3.0

# Analizar multiple paquetes
pcu analyze default --include "react*"
```

```bash {{ title: 'An√°lisis Detallado' }}
# Con informaci√≥n de seguridad
pcu analyze default react --security-impact

# Con an√°lisis de rendimiento
pcu analyze default --performance-impact

# An√°lisis comprensivo
pcu analyze default react --show-breaking --show-peer-deps --verbose
```

</CodeGroup>

---

## `pcu workspace` - Informaci√≥n del Workspace

Mostrar informaci√≥n detallada sobre la configuraci√≥n del workspace y validaci√≥n.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu workspace
pcu w
pcu -s
```

```bash {{ title: 'Con Validaci√≥n' }}
pcu workspace --validate
pcu workspace --check-config
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--validate" type="boolean">
    Ejecutar validaci√≥n comprensiva del workspace
  </Property>
  <Property name="--check-config" type="boolean">
    Validar archivo de configuraci√≥n PCU
  </Property>
  <Property name="--show-packages" type="boolean">
    Mostrar todos los paquetes del workspace
  </Property>
  <Property name="--show-catalogs" type="boolean">
    Mostrar informaci√≥n detallada de cat√°logos
  </Property>
  <Property name="--show-dependencies" type="boolean">
    Mostrar √°rbol de dependencias
  </Property>
  <Property name="--workspace-path" type="string">
    Ruta espec√≠fica del workspace a inspeccionar
  </Property>
  <Property name="--depth" type="number" default="2">
    Profundidad para mostrar dependencias
  </Property>
  <Property name="--include-dev" type="boolean">
    Incluir dependencias de desarrollo
  </Property>
  <Property name="--check-unused" type="boolean">
    Verificar dependencias no utilizadas en cat√°logos
  </Property>
  <Property name="--fix-issues" type="boolean">
    Intentar corregir problemas detectados autom√°ticamente
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, yaml, tree
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada
  </Property>
</Properties>

### Informaci√≥n Mostrada

#### Informaci√≥n del Workspace

- Ruta del workspace
- Configuraci√≥n PNPM
- Paquetes descubiertos
- Estructura de directorios

#### Informaci√≥n de Cat√°logos

- Cat√°logos disponibles
- Dependencias por cat√°logo
- Conflictos de versiones
- Dependencias no utilizadas

#### Validaci√≥n

- Configuraci√≥n PCU v√°lida
- Consistencia de cat√°logos
- Dependencias faltantes
- Problemas de estructura

### Ejemplos

<CodeGroup>

```bash {{ title: 'Informaci√≥n B√°sica' }}
# Mostrar informaci√≥n del workspace
pcu workspace

# Con validaci√≥n
pcu workspace --validate
```

```bash {{ title: 'Informaci√≥n Detallada' }}
# Mostrar todos los paquetes
pcu workspace --show-packages --verbose

# Informaci√≥n de cat√°logos
pcu workspace --show-catalogs --show-dependencies

# Verificar problemas
pcu workspace --check-unused --fix-issues
```

</CodeGroup>

---

## `pcu security` - Escaneo de Seguridad

Escanear vulnerabilidades de seguridad y aplicar correcciones.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu security
pcu sec
```

```bash {{ title: 'Con Correcciones' }}
pcu security --fix-vulns
pcu security --auto-fix
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--fix-vulns" type="boolean">
    Autom√°ticamente corregir vulnerabilidades cuando sea posible
  </Property>
  <Property name="--auto-fix" type="boolean">
    Modo de correcci√≥n autom√°tica sin confirmaci√≥n
  </Property>
  <Property name="--severity" type="enum">
    Filtrar por severidad: low, moderate, high, critical
  </Property>
  <Property name="--include" type="string">
    Incluir solo paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--exclude" type="string">
    Excluir paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--catalog" type="string">
    Escanear cat√°logo espec√≠fico
  </Property>
  <Property name="--workspace" type="string">
    Escanear workspace espec√≠fico
  </Property>
  <Property name="--ignore-dev" type="boolean">
    Ignorar vulnerabilidades en dependencias de desarrollo
  </Property>
  <Property name="--report" type="boolean">
    Generar reporte detallado de seguridad
  </Property>
  <Property name="--report-format" type="enum" default="json">
    Formato del reporte: json, csv, html, sarif
  </Property>
  <Property name="--allow-major" type="boolean">
    Permitir actualizaciones major para correcciones de seguridad
  </Property>
  <Property name="--create-backup" type="boolean">
    Crear respaldo antes de aplicar correcciones
  </Property>
  <Property name="--timeout" type="number" default="60000">
    Timeout para escaneo de seguridad (ms)
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, yaml, csv
  </Property>
  <Property name="-o, --output" type="string">
    Guardar reporte en archivo
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada de vulnerabilidades
  </Property>
</Properties>

### Niveles de Severidad

<Properties>
  <Property name="low" type="string">
    Vulnerabilidades de bajo riesgo
  </Property>
  <Property name="moderate" type="string">
    Vulnerabilidades de riesgo moderado
  </Property>
  <Property name="high" type="string">
    Vulnerabilidades de alto riesgo
  </Property>
  <Property name="critical" type="string">
    Vulnerabilidades cr√≠ticas que requieren atenci√≥n inmediata
  </Property>
</Properties>

### Estrategias de Correcci√≥n

#### Autom√°tica

- Actualizar a versi√≥n corregida m√°s cercana
- Preferir actualizaciones patch/minor
- Aplicar correcciones con bajo riesgo

#### Manual

- Mostrar opciones de correcci√≥n disponibles
- Permitir selecci√≥n de versi√≥n espec√≠fica
- Requerir confirmaci√≥n para cambios major

### Ejemplos

<CodeGroup>

```bash {{ title: 'Escaneo B√°sico' }}
# Escanear todas las vulnerabilidades
pcu security

# Solo vulnerabilidades cr√≠ticas
pcu security --severity critical

# Con correcci√≥n autom√°tica
pcu security --auto-fix
```

```bash {{ title: 'Reportes' }}
# Generar reporte JSON
pcu security --report --output security-report.json

# Reporte HTML
pcu security --report --report-format html --output report.html

# Formato SARIF para CI/CD
pcu security --report --report-format sarif
```

</CodeGroup>

---

## `pcu theme` - Configurar Temas

Configurar temas de color y configuraciones de interfaz de usuario.

<CodeGroup>

```bash {{ title: 'Uso B√°sico' }}
pcu theme
pcu t
pcu -t
```

```bash {{ title: 'Configurar Tema' }}
pcu theme set modern
pcu theme --list
pcu theme --reset
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="set <theme>" type="string">
    Establecer tema espec√≠fico: default, modern, minimal, neon
  </Property>
  <Property name="--list" type="boolean">
    Listar todos los temas disponibles
  </Property>
  <Property name="--preview" type="boolean">
    Mostrar vista previa de todos los temas
  </Property>
  <Property name="--interactive" type="boolean">
    Selector interactivo de temas
  </Property>
  <Property name="--progress-style" type="enum">
    Estilo de barra de progreso: default, gradient, fancy, minimal, rainbow, neon
  </Property>
  <Property name="--color-scheme" type="enum">
    Esquema de colores: auto, light, dark
  </Property>
  <Property name="--animations" type="boolean">
    Habilitar/deshabilitar animaciones
  </Property>
  <Property name="--reset" type="boolean">
    Restablecer a tema por defecto
  </Property>
  <Property name="--global" type="boolean">
    Aplicar configuraci√≥n globalmente para el usuario
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar configuraci√≥n detallada del tema
  </Property>
</Properties>

### Temas Disponibles

#### Default

Colores balanceados para uso general:

- üü¶ Azul para informaci√≥n
- üü© Verde para √©xito
- üü® Amarillo para advertencias
- üü• Rojo para errores

#### Modern

Colores vibrantes para entornos de desarrollo:

- üîµ Azul brillante
- üü¢ Verde ne√≥n
- üü° Amarillo vibrante
- üî¥ Rojo intenso

#### Minimal

Limpio y simple para entornos de producci√≥n:

- ‚ö´ Escala de grises
- Contraste alto
- Sin colores de acento

#### Neon

Colores de alto contraste para presentaciones:

- üåà Colores fluorescentes
- Alto contraste
- Efectos de brillo

### Estilos de Barra de Progreso

- `default` - Barra est√°ndar
- `gradient` - Colores degradados
- `fancy` - Elementos decorativos
- `minimal` - Indicador simple
- `rainbow` - Multicolor
- `neon` - Alto contraste

### Ejemplos

<CodeGroup>

```bash {{ title: 'Gesti√≥n de Temas' }}
# Listar temas disponibles
pcu theme --list

# Selector interactivo
pcu theme --interactive

# Vista previa de temas
pcu theme --preview
```

```bash {{ title: 'Configuraci√≥n Espec√≠fica' }}
# Establecer tema modern
pcu theme set modern

# Configurar barra de progreso
pcu theme --progress-style gradient

# Esquema de colores oscuro
pcu theme --color-scheme dark
```

</CodeGroup>

---

## `pcu ai` - Gesti√≥n de Proveedores AI

Verificar el estado de los proveedores AI y gestionar el cach√© de an√°lisis AI.

<CodeGroup>

```bash {{ title: 'Verificar Estado' }}
pcu ai
pcu ai --status
```

```bash {{ title: 'Test y Cach√©' }}
pcu ai --test
pcu ai --cache-stats
pcu ai --clear-cache
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--status" type="boolean">
    Mostrar estado de todos los proveedores AI (comportamiento por defecto)
  </Property>
  <Property name="--test" type="boolean">
    Probar an√°lisis AI con una solicitud de ejemplo
  </Property>
  <Property name="--cache-stats" type="boolean">
    Mostrar estad√≠sticas del cach√© de an√°lisis AI
  </Property>
  <Property name="--clear-cache" type="boolean">
    Limpiar cach√© de an√°lisis AI
  </Property>
</Properties>

### Detecci√≥n de Proveedores

El comando detecta autom√°ticamente los proveedores AI disponibles:

| Proveedor | Prioridad | M√©todo de Detecci√≥n |
| --------- | --------- | ------------------- |
| Claude    | 100       | CLI `claude`        |
| Gemini    | 80        | CLI `gemini`        |
| Codex     | 60        | CLI `codex`         |

### Ejemplos de Uso

```bash
# Ver estado de proveedores AI
pcu ai

# Probar an√°lisis AI con proveedor predeterminado
pcu ai --test

# Ver estad√≠sticas de cach√©
pcu ai --cache-stats

# Limpiar cach√© si hay problemas
pcu ai --clear-cache
```

---

## `pcu rollback` - Restauraci√≥n de Backup

Restaurar actualizaciones del cat√°logo a un estado anterior usando archivos de backup creados durante las actualizaciones.

<CodeGroup>

```bash {{ title: 'Listar Backups' }}
pcu rollback --list
pcu rollback -l
```

```bash {{ title: 'Operaciones de Restauraci√≥n' }}
pcu rollback --latest
pcu rollback --select
pcu rollback --delete-all
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="-l, --list" type="boolean">
    Listar todos los archivos de backup disponibles con marcas de tiempo
  </Property>
  <Property name="--latest" type="boolean">
    Restaurar autom√°ticamente al backup m√°s reciente
  </Property>
  <Property name="--select" type="boolean">
    Selecci√≥n interactiva del backup a restaurar
  </Property>
  <Property name="--delete-all" type="boolean">
    Eliminar todos los archivos de backup (requiere confirmaci√≥n)
  </Property>
  <Property name="-w, --workspace" type="string">
    Ruta del directorio del workspace (predeterminado: directorio actual)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada durante la restauraci√≥n
  </Property>
</Properties>

### Sistema de Backup

PCU crea archivos de backup autom√°ticamente cuando usa el flag `--create-backup` con el comando update:

```bash
pcu update --create-backup
```

Los archivos de backup se almacenan con marcas de tiempo y contienen el estado original de `pnpm-workspace.yaml` antes de las actualizaciones.

### Ejemplos de Uso

#### Listar Backups Disponibles

```bash
pcu rollback --list
```

Muestra todos los archivos de backup con sus marcas de tiempo de creaci√≥n y tama√±os de archivo.

#### Restaurar al √öltimo Backup

```bash
pcu rollback --latest
```

Restaura autom√°ticamente el backup m√°s reciente sin preguntar.

#### Selecci√≥n Interactiva de Backup

```bash
pcu rollback --select
```

Abre un prompt interactivo para seleccionar qu√© backup restaurar.

#### Limpiar Backups Antiguos

```bash
pcu rollback --delete-all --verbose
```

Elimina todos los archivos de backup con prompt de confirmaci√≥n y salida detallada.

---

## `pcu watch` - Modo de Observaci√≥n

Observar cambios en `pnpm-workspace.yaml` y verificar autom√°ticamente dependencias desactualizadas cuando se detectan modificaciones.

<CodeGroup>

```bash {{ title: 'Observaci√≥n B√°sica' }}
pcu watch
```

```bash {{ title: 'Observaci√≥n Avanzada' }}
pcu watch --debounce 1000 --clear
pcu watch --catalog default --target minor
pcu watch --include "react*" --exclude "*-dev"
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--catalog" type="string">
    Verificar solo un cat√°logo espec√≠fico
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Formato de salida: table, json, markdown
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    Objetivo de actualizaci√≥n: latest, minor, patch
  </Property>
  <Property name="--prerelease" type="boolean">
    Incluir versiones prerelease
  </Property>
  <Property name="--include" type="string">
    Incluir paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--exclude" type="string">
    Excluir paquetes que coincidan con el patr√≥n
  </Property>
  <Property name="--debounce" type="number" default="300">
    Retraso de debounce en milisegundos antes de verificar
  </Property>
  <Property name="--clear" type="boolean">
    Limpiar consola antes de cada verificaci√≥n
  </Property>
  <Property name="-w, --workspace" type="string">
    Ruta del directorio del workspace (predeterminado: directorio actual)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada
  </Property>
</Properties>

### Comportamiento de Observaci√≥n

El comando watch proporciona monitoreo continuo con caracter√≠sticas inteligentes:

- **Verificaci√≥n Inicial**: Ejecuta una verificaci√≥n inmediatamente cuando inicia la observaci√≥n
- **Debouncing**: Previene re-verificaciones r√°pidas cuando los archivos cambian r√°pidamente
- **Apagado Elegante**: Presione `Ctrl+C` para detener la observaci√≥n limpiamente
- **Actualizaciones en Tiempo Real**: Muestra conteos de paquetes desactualizados a medida que se detectan

### Ejemplos de Uso

#### Modo de Observaci√≥n B√°sico

```bash
pcu watch
```

Observa el `pnpm-workspace.yaml` del directorio actual para cambios.

#### Observar con Limpieza de Consola

```bash
pcu watch --clear
```

Limpia la consola antes de cada verificaci√≥n para una salida m√°s limpia.

#### Observar con Debounce Personalizado

```bash
pcu watch --debounce 1000
```

Espera 1 segundo despu√©s de cambios en archivos antes de ejecutar verificaciones.

#### Observar Cat√°logo Espec√≠fico

```bash
pcu watch --catalog default --target minor
```

Observa cambios y solo verifica el cat√°logo default para actualizaciones minor.

#### Observar con Filtros

```bash
pcu watch --include "react*,@types/*" --exclude "*-dev"
```

Observa y filtra resultados a patrones de paquetes espec√≠ficos.

### Consejos de Integraci√≥n

El modo de observaci√≥n es ideal para:

- **Flujos de Desarrollo**: Mantener las actualizaciones de dependencias visibles durante el desarrollo activo
- **Monitoreo CI/CD**: Monitorear actualizaciones en entornos de desarrollo de larga duraci√≥n
- **Notificaciones de Equipo**: Combinar con herramientas de notificaci√≥n para alertar sobre actualizaciones

---

## `pcu cache` - Gesti√≥n de Cach√©

Gestionar el cach√© de PCU para respuestas del registro NPM, datos del workspace y resultados de an√°lisis AI.

<CodeGroup>

```bash {{ title: 'Mostrar Estad√≠sticas' }}
pcu cache
pcu cache --stats
pcu cache --stats --verbose
```

```bash {{ title: 'Limpiar Cach√©' }}
pcu cache --clear
pcu cache --clear --verbose
```

</CodeGroup>

### Opciones

<Properties>
  <Property name="--stats" type="boolean">
    Mostrar estad√≠sticas de cach√© (comportamiento predeterminado)
  </Property>
  <Property name="--clear" type="boolean">
    Limpiar todas las entradas de cach√©
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Mostrar informaci√≥n detallada incluyendo descripciones y contadores de aciertos/fallos
  </Property>
  <Property name="--no-color" type="boolean">
    Deshabilitar salida a color
  </Property>
</Properties>

### Tipos de Cach√©

PCU gestiona tres cach√©s separados:

#### Cach√© de Registro

- **Prop√≥sito**: Almacena respuestas de la API del registro NPM
- **Beneficios**: Reduce solicitudes de red, consultas de versi√≥n m√°s r√°pidas
- **TTL**: 1 hora (configurable)

#### Cach√© de Workspace

- **Prop√≥sito**: Almacena datos del sistema de archivos del workspace
- **Beneficios**: An√°lisis de workspace m√°s r√°pido en ejecuciones repetidas
- **TTL**: 5 minutos (configurable)

#### Cach√© de An√°lisis AI

- **Prop√≥sito**: Almacena resultados de an√°lisis impulsados por AI
- **Beneficios**: Evita llamadas redundantes a APIs de AI, resultados consistentes
- **TTL**: 24 horas (configurable)

### Ejemplos de Uso

#### Mostrar Estad√≠sticas de Cach√©

```bash
pcu cache
```

Muestra estad√≠sticas resumidas de todos los cach√©s.

#### Limpiar Todos los Cach√©s

```bash
pcu cache --clear
```

Limpia todas las entradas de cach√©. √ötil cuando experimentas problemas con datos obsoletos.

---

## Funcionalidades Interactivas y Seguimiento de Progreso

PCU proporciona capacidades interactivas avanzadas y un sofisticado seguimiento de progreso en todos los comandos.

### Interfaz de Comandos Interactivos

#### Sistema de Selecci√≥n de Paquetes

- **Multi-Selecci√≥n Inteligente**: Elija paquetes espec√≠ficos con casillas de verificaci√≥n visuales y atajos de teclado
- **B√∫squeda y Filtro**: Filtrado de paquetes en tiempo real con coincidencia de patrones y b√∫squeda difusa
- **Operaciones por Lotes**: Seleccionar/deseleccionar grupos completos con selecci√≥n basada en categor√≠as
- **Vista Previa de Impacto**: Ver cambios potenciales antes de aplicar cualquier actualizaci√≥n

#### Asistente de Configuraci√≥n

El asistente de configuraci√≥n interactivo (`pcu init --interactive`) proporciona:

- **Detecci√≥n de Workspace**: Descubrimiento autom√°tico de workspaces PNPM existentes
- **Selecci√≥n de Plantillas**: Elegir entre plantillas de configuraci√≥n m√≠nima y completa
- **Configuraci√≥n de Reglas de Paquetes**: Configurar reglas para diferentes categor√≠as de paquetes (React, Vue, TypeScript)
- **Configuraci√≥n de Registro**: Configurar registros NPM personalizados y autenticaci√≥n
- **Configuraci√≥n de Validaci√≥n**: Configurar puertas de calidad y verificaciones de seguridad

#### Navegador de Directorios y Archivos

- **Navegaci√≥n de Workspace**: Navegador de sistema de archivos integrado para selecci√≥n de workspace
- **Validaci√≥n de Rutas**: Validaci√≥n en tiempo real de rutas y estructuras de workspace
- **Modo Vista Previa**: Ver contenidos del workspace antes de confirmar la selecci√≥n

### Seguimiento de Progreso Avanzado

#### Barras de Progreso Multi-Estilo

PCU ofrece seis estilos diferentes de barras de progreso, configurables por comando o globalmente:

<CodeGroup>

```bash {{ title: 'Ejemplos de Estilos' }}
# Usar barras de progreso con degradado
pcu update --progress-style gradient

# Progreso animado arco√≠ris
pcu check --progress-style rainbow

# M√≠nimo para entornos CI/CD
pcu security --progress-style minimal
```

</CodeGroup>

#### Caracter√≠sticas de Progreso

- **Seguimiento Multi-Paso**: Muestra progreso a trav√©s de diferentes fases (escanear ‚Üí analizar ‚Üí actualizar)
- **Estado de Operaciones Paralelas**: Barras de progreso individuales para operaciones concurrentes
- **M√©tricas de Rendimiento**: Indicadores de velocidad en tiempo real, c√°lculos de ETA, tiempo transcurrido
- **Visualizaci√≥n Segura de Memoria**: Salida multil√≠nea estable que reduce el parpadeo del terminal

#### Estado de Procesamiento por Lotes

- **Gesti√≥n de Cola**: Muestra operaciones de paquetes pendientes, activas y completadas
- **Resoluci√≥n de Conflictos**: Manejo interactivo de conflictos de dependencias de pares
- **Recuperaci√≥n de Errores**: Opciones de omitir/reintentar para operaciones fallidas con contexto detallado de error
- **Capacidades de Rollback**: Deshacer cambios si se detectan problemas durante las actualizaciones

### Manejo de Errores y Recuperaci√≥n

#### Detecci√≥n Inteligente de Errores

- **Errores de Validaci√≥n**: Verificaciones previas con sugerencias √∫tiles para errores comunes
- **Problemas de Red**: Reintento autom√°tico con retroceso exponencial para fallos de registro
- **Conflictos de Dependencias**: An√°lisis detallado de conflictos con recomendaciones de resoluci√≥n
- **Problemas de Permisos**: Gu√≠a clara para problemas de permisos del sistema de archivos

#### Opciones de Recuperaci√≥n Interactiva

- **Omitir y Continuar**: Omitir paquetes problem√°ticos y continuar con actualizaciones restantes
- **Reintentar con Opciones**: Reintentar operaciones fallidas con diferentes par√°metros
- **Revertir Cambios**: Deshacer cambios parciales si ocurren problemas durante operaciones por lotes
- **Exportar Informe de Errores**: Generar informes detallados de errores para resoluci√≥n de problemas

### Integraci√≥n de Workspace

#### Caracter√≠sticas de Auto-Descubrimiento

- **Detecci√≥n de Workspace PNPM**: Encuentra y valida autom√°ticamente configuraciones de workspace
- **Descubrimiento de Cat√°logo**: Detecta cat√°logos existentes y sus mapeos de paquetes
- **An√°lisis de Paquetes**: Analiza estructura del workspace y relaciones de dependencias
- **Herencia de Configuraci√≥n**: Aplica configuraciones espec√≠ficas del workspace autom√°ticamente

#### Validaci√≥n y Verificaciones de Salud

- **Validaci√≥n de Estructura**: Asegura que el workspace siga las mejores pr√°cticas de PNPM
- **Consistencia de Dependencias**: Verifica discrepancias de versiones entre paquetes
- **Integridad de Configuraci√≥n**: Valida configuraci√≥n de PCU contra estructura del workspace
- **M√©tricas de Salud**: Proporciona evaluaci√≥n comprensiva de salud del workspace

### Ejemplos de Uso

#### Actualizaci√≥n Interactiva con Caracter√≠sticas Avanzadas

```bash
pcu update --interactive --progress-style fancy --batch-size 15
```

Lanza actualizaci√≥n interactiva con barras de progreso elegantes y procesamiento por lotes optimizado.

#### Configuraci√≥n con Vista Previa

```bash
pcu init --interactive --preview --verbose
```

Ejecuta asistente de configuraci√≥n con modo vista previa y registro detallado.

#### Flujo de Trabajo de Recuperaci√≥n de Errores

```bash
pcu update --interactive --create-backup --confirm-major
```

Actualizaciones con recuperaci√≥n interactiva de errores, copias de seguridad autom√°ticas y confirmaci√≥n de versiones mayores.

---

## Opciones Globales

Estas opciones est√°n disponibles para todos los comandos:

<Properties>
  <Property name="-w, --workspace" type="string">
    Directorio del workspace (predeterminado: directorio actual)
  </Property>
  <Property name="-c, --config" type="string">
    Archivo de configuraci√≥n personalizado
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Habilitar salida detallada
  </Property>
  <Property name="--silent" type="boolean">
    Suprimir toda la salida excepto errores
  </Property>
  <Property name="--no-color" type="boolean">
    Deshabilitar salida a color
  </Property>
  <Property name="--no-progress" type="boolean">
    Deshabilitar barras de progreso
  </Property>
  <Property name="--no-cache" type="boolean">
    Deshabilitar caching para esta ejecuci√≥n
  </Property>
  <Property name="--timeout" type="number" default="30000">
    Timeout global para operaciones de red (ms)
  </Property>
  <Property name="--concurrency" type="number" default="5">
    N√∫mero m√°ximo de operaciones concurrentes
  </Property>
  <Property name="--registry" type="string">
    Registro NPM personalizado
  </Property>
  <Property name="--dry-run" type="boolean">
    Mostrar qu√© se har√≠a sin ejecutar cambios
  </Property>
  <Property name="--help" type="boolean">
    Mostrar informaci√≥n de ayuda
  </Property>
  <Property name="--version" type="boolean">
    Mostrar versi√≥n de PCU
  </Property>
</Properties>

---

## Sistema de Auto-Actualizaci√≥n

PCU incluye un sofisticado mecanismo de auto-actualizaci√≥n que mantiene la herramienta CLI actualizada con las √∫ltimas caracter√≠sticas y parches de seguridad.

### Verificaci√≥n Autom√°tica de Actualizaciones

Por defecto, PCU verifica actualizaciones cuando ejecutas cualquier comando:

<CodeGroup>

```bash {{ title: 'Operaci√≥n Normal' }}
# PCU verifica autom√°ticamente actualizaciones
pcu check
# La salida puede incluir: "üì¶ PCU v0.8.0 est√° disponible (actual: v0.7.15)"
```

```bash {{ title: 'Deshabilitar Verificaci√≥n de Actualizaciones' }}
# Deshabilitar para un solo comando
pcu check --no-update-check

# Deshabilitar globalmente v√≠a entorno
export PCU_SKIP_VERSION_CHECK=true
pcu check
```

</CodeGroup>

### Comportamiento de Actualizaci√≥n

#### Detecci√≥n de Entorno CI/CD

PCU detecta autom√°ticamente entornos CI/CD y omite verificaciones de actualizaci√≥n para evitar interrumpir pipelines automatizados:

- **GitHub Actions**: Detectado v√≠a variable de entorno `GITHUB_ACTIONS`
- **CircleCI**: Detectado v√≠a variable de entorno `CIRCLECI`
- **Jenkins**: Detectado v√≠a variable de entorno `JENKINS_URL`
- **GitLab CI**: Detectado v√≠a variable de entorno `GITLAB_CI`
- **Azure DevOps**: Detectado v√≠a variable de entorno `TF_BUILD`
- **CI Gen√©rico**: Detectado v√≠a variable de entorno `CI`

#### Instalaci√≥n de Actualizaci√≥n

PCU soporta m√∫ltiples gestores de paquetes con fallback autom√°tico:

```bash
# PCU intenta en orden: npm ‚Üí pnpm ‚Üí yarn
npm install -g pcu@latest
# Si npm falla, intenta:
pnpm add -g pnpm-catalog-updates@latest
# Si pnpm falla, intenta:
yarn global add pnpm-catalog-updates@latest
```

### Opciones de Configuraci√≥n

#### Variables de Entorno

<Properties>
  <Property name="PCU_SKIP_VERSION_CHECK" type="boolean">
    Deshabilitar completamente la verificaci√≥n de versiones y notificaciones de actualizaci√≥n
  </Property>
  <Property name="PCU_UPDATE_CHECK_INTERVAL" type="number">
    Horas entre verificaciones de actualizaci√≥n (predeterminado: 24)
  </Property>
  <Property name="PCU_AUTO_UPDATE" type="boolean">
    Instalar autom√°ticamente actualizaciones sin preguntar (usar con precauci√≥n)
  </Property>
  <Property name="PCU_UPDATE_TIMEOUT" type="number">
    Timeout para solicitudes de verificaci√≥n de actualizaci√≥n en milisegundos (predeterminado: 5000)
  </Property>
</Properties>

#### Configuraci√≥n en Archivo

```json
{
  "updates": {
    "checkForUpdates": true,
    "autoUpdate": false,
    "checkInterval": 86400000,
    "timeout": 5000,
    "skipInCI": true,
    "notifyPrerelease": false
  }
}
```

### Notificaciones de Actualizaci√≥n

#### Notificaci√≥n Est√°ndar

```bash
pcu check
# ‚ú® PCU v0.8.0 est√° disponible (actual: v0.7.15)
# Ejecuta 'npm install -g pcu@latest' para actualizar
# Usa --no-update-check para deshabilitar este mensaje
```

#### Notificaci√≥n de Actualizaci√≥n de Seguridad

```bash
pcu security
# üîí ACTUALIZACI√ìN DE SEGURIDAD: PCU v0.7.16 contiene correcciones de seguridad (actual: v0.7.15)
# Actualiza inmediatamente: npm install -g pcu@latest
```

#### Notificaci√≥n de Prelanzamiento

```bash
# Solo se muestra si notifyPrerelease: true
pcu check
# üß™ PCU v0.8.0-beta.1 est√° disponible para pruebas (actual: v0.7.15)
# Instalar con: npm install -g pcu@beta
```

### Comandos de Actualizaci√≥n Manual

<CodeGroup>

```bash {{ title: 'Verificar Estado de Actualizaci√≥n' }}
# Verificar versi√≥n actual y actualizaciones disponibles
pcu --version
pcu -V
```

```bash {{ title: 'Actualizaci√≥n Manual' }}
# Actualizar v√≠a npm
npm install -g pcu@latest

# Actualizar v√≠a pnpm
pnpm add -g pnpm-catalog-updates@latest

# Actualizar a versi√≥n espec√≠fica
npm install -g pcu@0.8.0
```

</CodeGroup>

### Resoluci√≥n de Problemas de Actualizaci√≥n

#### Fallos en Verificaci√≥n de Actualizaci√≥n

```bash
# Si la verificaci√≥n de actualizaci√≥n falla por problemas de red
PCU_UPDATE_TIMEOUT=10000 pcu check

# Forzar verificaci√≥n de actualizaci√≥n incluso en CI
PCU_SKIP_VERSION_CHECK=false CI=false pcu check
```

#### Limpieza de Cach√©

```bash
# Limpiar cach√© de verificaci√≥n de actualizaci√≥n
rm -rf ~/.pcu/cache/version-check

# O deshabilitar caching completamente
PCU_CACHE_ENABLED=false pcu check
```

#### Problemas de Permisos

```bash
# Corregir problemas de permisos de npm
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH

# O usar pnpm/yarn que manejan mejor los permisos
pnpm add -g pnpm-catalog-updates@latest
```

---

## Sistema de Gesti√≥n de Cach√©

PCU incluye un sistema de cach√© comprensivo para optimizar el rendimiento y reducir las solicitudes de red.

### Tipos de Cach√©

#### Cach√© de Registro

Almacena metadatos de paquetes NPM e informaci√≥n de versiones:

- **TTL Predeterminado**: 1 hora (3,600,000ms)
- **Tama√±o M√°ximo**: 10MB por tipo de cach√©
- **Entradas M√°ximas**: 500 paquetes
- **Persistencia en Disco**: Habilitada

#### Cach√© de Workspace

Almacena configuraci√≥n de workspace y resultados de parseo de package.json:

- **TTL Predeterminado**: 5 minutos (300,000ms)
- **Tama√±o M√°ximo**: 5MB
- **Entradas M√°ximas**: 200 workspaces
- **Persistencia en Disco**: Deshabilitada (solo memoria)

#### Cach√© de An√°lisis AI

Almacena resultados de an√°lisis de proveedores AI:

- **TTL Predeterminado**: 24 horas (86,400,000ms)
- **Tama√±o M√°ximo**: 20MB
- **Entradas M√°ximas**: 100 an√°lisis
- **Persistencia en Disco**: Habilitada

### Configuraci√≥n de Cach√©

#### Variables de Entorno

<Properties>
  <Property name="PCU_CACHE_ENABLED" type="boolean" default="true">
    Habilitar/deshabilitar todo el sistema de cach√©
  </Property>
  <Property name="PCU_CACHE_TTL" type="number" default="3600000">
    TTL predeterminado de cach√© en milisegundos
  </Property>
  <Property name="PCU_CACHE_MAX_SIZE" type="number" default="52428800">
    Tama√±o m√°ximo total de cach√© en bytes (50MB predeterminado)
  </Property>
  <Property name="PCU_CACHE_MAX_ENTRIES" type="number" default="10000">
    N√∫mero m√°ximo de entradas de cach√©
  </Property>
  <Property name="PCU_CACHE_DIR" type="string" default="~/.pcu/cache">
    Ruta personalizada del directorio de cach√©
  </Property>
  <Property name="PCU_CACHE_PERSIST" type="boolean" default="true">
    Habilitar persistencia en disco para cach√©s
  </Property>
</Properties>

#### Configuraci√≥n en Archivo

```json
{
  "cache": {
    "enabled": true,
    "ttl": 3600000,
    "maxSize": 52428800,
    "maxEntries": 10000,
    "persistToDisk": true,
    "cacheDir": "~/.pcu/cache",
    "registry": {
      "ttl": 3600000,
      "maxSize": 10485760,
      "maxEntries": 500
    },
    "workspace": {
      "ttl": 300000,
      "maxSize": 5242880,
      "maxEntries": 200,
      "persistToDisk": false
    }
  }
}
```

### Comandos de Gesti√≥n de Cach√©

<CodeGroup>

```bash {{ title: 'Estado de Cach√©' }}
# Ver estad√≠sticas de cach√© (v√≠a modo verbose)
pcu check --verbose
# Muestra: Aciertos de cach√©: 85%, Tama√±o: 15.2MB, Entradas: 342

# Ver estad√≠sticas detalladas
pcu cache --stats
```

```bash {{ title: 'Limpiar Cach√©' }}
# Limpiar todos los cach√©s
pcu cache --clear

# Limpiar tipo de cach√© espec√≠fico
rm -rf ~/.pcu/cache/registry
rm -rf ~/.pcu/cache/workspace

# Deshabilitar cach√© para un solo comando
PCU_CACHE_ENABLED=false pcu check
```

</CodeGroup>

### Rendimiento de Cach√©

#### Caracter√≠sticas de Optimizaci√≥n

- **Eliminaci√≥n LRU**: Los elementos menos usados recientemente se eliminan primero
- **Limpieza Autom√°tica**: Entradas expiradas se eliminan cada 5 minutos
- **Monitoreo de Tama√±o**: Eliminaci√≥n autom√°tica cuando se exceden los l√≠mites de tama√±o
- **Procesamiento Paralelo**: Las operaciones de cach√© no bloquean el hilo principal

#### Beneficios de Rendimiento

- **Solicitudes de Registro**: 60-90% de reducci√≥n en llamadas al registro NPM
- **Parseo de Workspace**: 80-95% m√°s r√°pido en an√°lisis de workspace en ejecuciones repetidas
- **Dependencia de Red**: Menor dependencia de conectividad de red
- **Tiempo de Inicio**: 2-5x m√°s r√°pido en operaciones subsiguientes
