export const metadata = {
  title: 'é–‹ç™º',
  description:
    'é–‹ç™ºç”¨ã«pnpm-catalog-updatesã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã€é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ãŠã‚ˆã³è²¢çŒ®æ–¹æ³•ã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚',
};

# é–‹ç™º

PCUã‚’é–‹ç™ºç”¨ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãŠã‚ˆã³é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’èª¬æ˜ã—ã¾ã™ã€‚{{ className: 'lead' }}

## å‰ææ¡ä»¶

PCUã®é–‹ç™ºã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€å¿…è¦ãªãƒ„ãƒ¼ãƒ«ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

<Note>é–‹ç™ºã«ã¯Node.js >= 22.0.0ãŠã‚ˆã³pnpm >= 10.0.0ãŒå¿…è¦ã§ã™ã€‚</Note>

<CodeGroup>

```bash {{ title: 'ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª' }}
node --version  # >= 22.0.0ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
pnpm --version  # >= 10.0.0ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
```

```bash {{ title: 'ãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«' }}
# nvmã§Node.jsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 22
nvm use 22

# pnpmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g pnpm@latest
```

</CodeGroup>

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦é–‹ç™ºç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ï¼š

<CodeGroup>

```bash {{ title: 'ã‚¯ãƒ­ãƒ¼ãƒ³ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—' }}
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/houko/pnpm-catalog-updates.git
cd pnpm-catalog-updates

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰
pnpm build

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ç¢ºèª
pnpm test
```

```bash {{ title: 'é–‹ç™ºãƒ¢ãƒ¼ãƒ‰' }}
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
pnpm dev --help

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ“ãƒ«ãƒ‰
pnpm build:watch

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:watch
```

</CodeGroup>

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

PCUã¯æ˜ç¢ºãªé–¢å¿ƒã®åˆ†é›¢ã‚’æŒã¤ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®åŸå‰‡ã«å¾“ã£ã¦ã„ã¾ã™ï¼š

```text
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ cli/                    # CLIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤
â”‚   â”‚   â”œâ”€â”€ src/cli/           # CLIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
â”‚   â”‚   â”‚   â”œâ”€â”€ commands/      # ã‚³ãƒãƒ³ãƒ‰ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ formatters/    # å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ interactive/   # ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ themes/        # ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ
â”‚   â”‚   â”‚   â””â”€â”€ validators/    # å…¥åŠ›æ¤œè¨¼
â”‚   â”‚   â””â”€â”€ bin/               # å®Ÿè¡Œå¯èƒ½ãƒã‚¤ãƒŠãƒª
â”‚   â””â”€â”€ docs/                  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆ
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/                  # ã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ application/   # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
â”‚   â”‚       â”œâ”€â”€ domain/        # ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼ˆDDDï¼‰
â”‚   â”‚       â””â”€â”€ infrastructure/# ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼å±¤
â”‚   â””â”€â”€ utils/                 # å…±æœ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ scripts/                   # ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤
```

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å±¤

<Properties>
  <Property name="CLIå±¤" type="apps/cli">
    ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€ã‚³ãƒãƒ³ãƒ‰è§£æã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  </Property>
  <Property name="ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤" type="packages/core/application">
    ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
  </Property>
  <Property name="ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤" type="packages/core/domain">
    ã‚³ã‚¢ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ãƒªãƒã‚¸ãƒˆãƒªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  </Property>
  <Property name="ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼å±¤" type="packages/core/infrastructure">
    å¤–éƒ¨APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹ã€ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…
  </Property>
  <Property name="ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å±¤" type="packages/utils">
    å…±æœ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€è¨­å®šã€ãƒ­ã‚°ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  </Property>
</Properties>

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### å¤‰æ›´ã‚’è¡Œã†

1. **ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ**ï¼š

   ```bash
   git checkout -b feature/amazing-feature
   ```

2. **ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¨™æº–ã«å¾“ã£ã¦å¤‰æ›´ã‚’è¡Œã†**

3. **å¤‰æ›´ã«ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ **ï¼š

   ```bash
   pnpm test:watch  # ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
   ```

4. **å“è³ªãƒã‚§ãƒƒã‚¯ãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª**ï¼š

   ```bash
   pnpm lint        # ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
   pnpm typecheck   # å‹ãƒã‚§ãƒƒã‚¯
   pnpm test        # å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
   ```

5. **å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ**ï¼š
   ```bash
   git commit -m 'feat: add amazing feature'
   ```

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

PCUã¯åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼š

<CodeGroup>

```bash {{ title: 'å˜ä½“ãƒ†ã‚¹ãƒˆ' }}
# å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pnpm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pnpm test:coverage

# ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ†ã‚¹ãƒˆ
pnpm --filter @pcu/core test
```

```bash {{ title: 'ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ' }}
# E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pnpm test:e2e

# å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ†ã‚¹ãƒˆ
pnpm test:e2e --project example-workspace
```

```bash {{ title: 'çµ±åˆãƒ†ã‚¹ãƒˆ' }}
# CLIã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆ
pnpm test:cli

# ç•°ãªã‚‹Nodeãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãƒ†ã‚¹ãƒˆ
nvm use 18 && pnpm test
nvm use 20 && pnpm test
nvm use 22 && pnpm test
```

</CodeGroup>

### ã‚³ãƒ¼ãƒ‰å“è³ª

PCUã¯é«˜ã„ã‚³ãƒ¼ãƒ‰å“è³ªæ¨™æº–ã‚’ç¶­æŒã—ã¦ã„ã¾ã™ï¼š

<CodeGroup>

```bash {{ title: 'ãƒªãƒ³ãƒˆã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ' }}
# ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
pnpm lint

# ãƒªãƒ³ãƒˆå•é¡Œã‚’ä¿®æ­£
pnpm lint:fix

# ã‚³ãƒ¼ãƒ‰ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
pnpm format

# TypeScriptå‹ã‚’ãƒã‚§ãƒƒã‚¯
pnpm typecheck
```

```json {{ title: 'å“è³ªæ¨™æº–' }}
{
  "coverage": {
    "statements": 85,
    "branches": 80,
    "functions": 85,
    "lines": 85
  },
  "lint": "TypeScriptãƒ«ãƒ¼ãƒ«ä»˜ãESLint",
  "format": "ã‚«ã‚¹ã‚¿ãƒ è¨­å®šä»˜ãPrettier",
  "types": "å³å¯†ãªTypeScriptè¨­å®š"
}
```

</CodeGroup>

## æ©Ÿèƒ½ã®è¿½åŠ 

### æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã®ä½œæˆ

1. **`apps/cli/src/cli/commands/`ã«ã‚³ãƒãƒ³ãƒ‰ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½œæˆ**ï¼š

<CodeGroup>

```typescript {{ title: 'newCommand.ts' }}
import { Command } from 'commander';
import { GlobalOptions } from '../options';

export function createNewCommand(): Command {
  return new Command('new')
    .description('æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜')
    .option('-f, --format <type>', 'å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ', 'table')
    .action(async (options: NewCommandOptions) => {
      // ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
    });
}

interface NewCommandOptions extends GlobalOptions {
  format: string;
}
```

```typescript {{ title: 'ã‚³ãƒãƒ³ãƒ‰ã®ç™»éŒ²' }}
// apps/cli/src/cli/index.tsã§
import { createNewCommand } from './commands/newCommand';

program.addCommand(createNewCommand());
```

</CodeGroup>

2. **`packages/core/src/application/services/`ã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ **

3. **CLIã¨ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ**

4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°**

### æ–°ã—ã„å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®è¿½åŠ 

1. **`apps/cli/src/cli/formatters/`ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚’ä½œæˆ**ï¼š

```typescript {{ title: 'xmlFormatter.ts' }}
import { OutputFormatter, FormattedOutput } from './outputFormatter';

export class XmlFormatter implements OutputFormatter {
  format(data: any): FormattedOutput {
    // XMLãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ­ã‚¸ãƒƒã‚¯
    return {
      content: xmlContent,
      type: 'xml',
    };
  }
}
```

2. **ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚’ç™»éŒ²**

3. **ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ **ã—ã€**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°**

## è²¢çŒ®ã‚¬ã‚¤ãƒ‰

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

PCUã¯[Conventional Commits](https://conventionalcommits.org/)ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼š

<CodeGroup>

```bash {{ title: 'ã‚³ãƒŸãƒƒãƒˆã‚¿ã‚¤ãƒ—' }}
feat: æ–°æ©Ÿèƒ½
fix: ãƒã‚°ä¿®æ­£
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã¿ã®å¤‰æ›´
style: ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã®å¤‰æ›´ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ï¼‰
refactor: ãƒã‚°ä¿®æ­£ã‚‚æ©Ÿèƒ½è¿½åŠ ã‚‚ã—ãªã„ã‚³ãƒ¼ãƒ‰å¤‰æ›´
test: ä¸è¶³ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚„æ—¢å­˜ãƒ†ã‚¹ãƒˆã®ä¿®æ­£
chore: ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚„è£œåŠ©ãƒ„ãƒ¼ãƒ«ã®å¤‰æ›´
```

```bash {{ title: 'ä¾‹' }}
feat: ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ 
fix: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å„ªé›…ã«å‡¦ç†
docs: è¨­å®šä¾‹ã‚’æ›´æ–°
test: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ•ã‚£ãƒ«ã‚¿ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
```

</CodeGroup>

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯**ã—ã¦ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. **é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«å¾“ã£ã¦å¤‰æ›´ã‚’è¡Œã†**
3. **ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šé**ã—ã€ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯ãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
4. **å¿…è¦ã«å¿œã˜ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°**
5. **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æå‡º**ã™ã‚‹éš›ã«å«ã‚ã‚‹å†…å®¹ï¼š
   - å¤‰æ›´ã®æ˜ç¢ºãªèª¬æ˜
   - é–¢é€£ã™ã‚‹èª²é¡Œã¸ã®ãƒªãƒ³ã‚¯
   - UIå¤‰æ›´ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
   - è©²å½“ã™ã‚‹å ´åˆã®ç ´å£Šçš„å¤‰æ›´ã®èª¬æ˜

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

1. ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒé€šé
2. ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒç¶­æŒã•ã‚Œã¦ã„ã‚‹ï¼ˆ>85%ï¼‰
3. TypeScriptå‹ãŒæ­£ã—ã„
4. ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–ã«å¾“ã£ã¦ã„ã‚‹
5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹
6. ç ´å£Šçš„å¤‰æ›´ãŒæ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã‚‹
7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹

## ãƒ‡ãƒãƒƒã‚°

### é–‹ç™ºãƒ‡ãƒãƒƒã‚°

<CodeGroup>

```bash {{ title: 'CLIã‚³ãƒãƒ³ãƒ‰ã®ãƒ‡ãƒãƒƒã‚°' }}
# Node.jsã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã§ãƒ‡ãƒãƒƒã‚°
node --inspect-brk ./apps/cli/bin/pcu.js --help

# VS Codeã§ãƒ‡ãƒãƒƒã‚°
# .vscode/launch.jsonã®èµ·å‹•è¨­å®šã‚’ä½¿ç”¨
```

```bash {{ title: 'è©³ç´°ãƒ­ã‚°' }}
# ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’æœ‰åŠ¹åŒ–
DEBUG=pcu:* pnpm dev --verbose

# ç‰¹å®šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ãƒ‡ãƒãƒƒã‚°
DEBUG=pcu:core,pcu:cli pcu -c
```

</CodeGroup>

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒãƒƒã‚°

```bash
# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’ãƒ‡ãƒãƒƒã‚°
npm test -- --grep "specific test name"

# Nodeã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã§ãƒ‡ãƒãƒƒã‚°
node --inspect-brk node_modules/.bin/vitest run
```

## ãƒ“ãƒ«ãƒ‰ã¨ãƒªãƒªãƒ¼ã‚¹

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ

<CodeGroup>

```bash {{ title: 'ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰ã®ãƒ†ã‚¹ãƒˆ' }}
# ãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆ
pnpm build
pnpm --filter @pcu/cli start --help

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ãƒ†ã‚¹ãƒˆ
npm pack apps/cli
npm install -g pcu-*.tgz
```

```bash {{ title: 'ä¾‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®ãƒ†ã‚¹ãƒˆ' }}
# ä¾‹ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½¿ç”¨
cd apps/example
pcu -c
pcu -u --dry-run
```

</CodeGroup>

### ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹

1. **changesetsã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°**ï¼š

   ```bash
   pnpm changeset
   pnpm changeset version
   ```

2. **ãƒ“ãƒ«ãƒ‰ã¨ãƒ†ã‚¹ãƒˆ**ï¼š

   ```bash
   pnpm build
   pnpm test
   pnpm test:e2e
   ```

3. **å…¬é–‹**ï¼ˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼ã®ã¿ï¼‰ï¼š
   ```bash
   pnpm publish -r
   ```

## ãƒ˜ãƒ«ãƒ—ã®å–å¾—

- ğŸ“– **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**ï¼šè©³ç´°ãªã‚¬ã‚¤ãƒ‰ã«ã¤ã„ã¦ã¯ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§
- ğŸ› **èª²é¡Œ**ï¼š[GitHub Issues](https://github.com/houko/pnpm-catalog-updates/issues)ã§ãƒã‚°ã‚’å ±å‘Š
- ğŸ’¬ **ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³**ï¼š[GitHub Discussions](https://github.com/houko/pnpm-catalog-updates/discussions)ã§è³ªå•
- ğŸ”§ **é–‹ç™º**ï¼šIssuesã‚„PRã®é–‹ç™ºãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã«å‚åŠ 

## é«˜åº¦ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°

### ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰åŸå‰‡ã«åŸºã¥ãã€PCUã®ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã¯ä»¥ä¸‹ãŒå«ã¾ã‚Œã¾ã™ï¼š

<CodeGroup>

```typescript {{ title: 'ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£' }}
// packages/core/src/domain/entities/
â”œâ”€â”€ catalog.ts          // ã‚«ã‚¿ãƒ­ã‚°é›†ç´„ãƒ«ãƒ¼ãƒˆ
â”œâ”€â”€ package.ts          // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â””â”€â”€ workspace.ts        // ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹é›†ç´„ãƒ«ãƒ¼ãƒˆ

// ä¸»è¦ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ã‚»ãƒ—ãƒˆï¼š
interface Catalog {
  readonly id: CatalogId;
  readonly name: string;
  packages: PackageCollection;
  addPackage(packageInfo: Package): void;
  updatePackage(name: string, version: Version): void;
}

interface Package {
  readonly name: string;
  readonly currentVersion: Version;
  readonly latestVersion: Version;
  readonly updateType: UpdateType;
}
```

```typescript {{ title: 'å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ' }}
// packages/core/src/domain/value-objects/
â”œâ”€â”€ version.ts           // ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³å‡¦ç†
â”œâ”€â”€ workspacePath.ts     // ãƒ‘ã‚¹æ¤œè¨¼
â”œâ”€â”€ workspaceConfig.ts   // è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
â””â”€â”€ catalogCollection.ts // ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

// ä¸å¤‰ã®å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚’ä¿è¨¼
class Version {
  constructor(private readonly value: string) {
    if (!this.isValid(value)) {
      throw new InvalidVersionError(value);
    }
  }

  toString(): string { return this.value; }
  compare(other: Version): number { /* semveræ¯”è¼ƒ */ }
}
```

</CodeGroup>

### ã‚µãƒ¼ãƒ“ã‚¹å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚’é€šã˜ã¦ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç·¨æˆã—ã¾ã™ï¼š

<CodeGroup>

```typescript {{ title: 'ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹' }}
// packages/core/src/application/services/
â”œâ”€â”€ catalogUpdateService.ts  // ãƒ¡ã‚¤ãƒ³ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â””â”€â”€ workspaceService.ts      // ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ“ä½œ

// ã‚µãƒ¼ãƒ“ã‚¹è²¬å‹™ï¼š
class CatalogUpdateService {
  async checkForUpdates(options: CheckOptions): Promise<UpdateReport>;
  async updateCatalog(options: UpdateOptions): Promise<UpdateResult>;
  async analyzeImpact(catalog: string, package: string): Promise<ImpactAnalysis>;
}
```

```typescript {{ title: 'ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼å±¤' }}
// packages/core/src/infrastructure/
â”œâ”€â”€ external-services/
â”‚   â””â”€â”€ npmRegistryService.ts   // NPM APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ repositories/
â”‚   â””â”€â”€ fileWorkspaceRepository.ts  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ°¸ç¶šåŒ–
â”œâ”€â”€ cache/
â”‚   â””â”€â”€ cache.ts                # é«˜åº¦ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚·ã‚¹ãƒ†ãƒ 
â””â”€â”€ utils/
    â””â”€â”€ npmrcParser.ts          # è¨­å®šè§£æ

// ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ãƒ¼ã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ï¼š
class FileWorkspaceRepository implements WorkspaceRepository {
  async findWorkspace(path: string): Promise<Workspace | null>;
  async saveWorkspace(workspace: Workspace): Promise<void>;
}
```

</CodeGroup>

### CLIå±¤è¨­è¨ˆ

CLIå±¤ã¯ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‚¯ãƒªãƒ¼ãƒ³ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã¾ã™ï¼š

<CodeGroup>

```typescript {{ title: 'ã‚³ãƒãƒ³ãƒ‰æ§‹é€ ' }}
// apps/cli/src/cli/commands/
â”œâ”€â”€ checkCommand.ts     // ãƒã‚§ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
â”œâ”€â”€ updateCommand.ts    // æ¤œè¨¼ä»˜ãæ›´æ–°ã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ analyzeCommand.ts   # å½±éŸ¿åˆ†æã‚³ãƒãƒ³ãƒ‰
â”œâ”€â”€ workspaceCommand.ts # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†
â”œâ”€â”€ themeCommand.ts     # ãƒ†ãƒ¼ãƒè¨­å®š
â”œâ”€â”€ securityCommand.ts  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
â””â”€â”€ initCommand.ts      # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹åˆæœŸåŒ–

// å„ã‚³ãƒãƒ³ãƒ‰ã¯ä¸€è²«ã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã„ã¾ã™ï¼š
export class CheckCommand {
  constructor(
    private readonly catalogService: CatalogUpdateService,
    private readonly validator: CommandValidator,
    private readonly formatter: OutputFormatter
  ) {}

  async execute(options: CheckCommandOptions): Promise<void> {
    const validation = this.validator.validateCheckOptions(options);
    if (!validation.isValid) {
      throw new ValidationError(validation.errors);
    }

    const result = await this.catalogService.checkForUpdates(options);
    const formatted = this.formatter.format(result, options.format);
    console.log(formatted);
  }
}
```

```typescript {{ title: 'é«˜åº¦ãªCLIæ©Ÿèƒ½' }}
// apps/cli/src/cli/
â”œâ”€â”€ validators/
â”‚   â””â”€â”€ commandValidator.ts    # ææ¡ˆä»˜ãå…¥åŠ›æ¤œè¨¼
â”œâ”€â”€ interactive/
â”‚   â””â”€â”€ interactivePrompts.ts  # è‡ªå‹•è£œå®Œä»˜ãã‚¹ãƒãƒ¼ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
â”œâ”€â”€ themes/
â”‚   â””â”€â”€ colorTheme.ts          # åŒ…æ‹¬çš„ãƒ†ãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ 
â””â”€â”€ formatters/
    â””â”€â”€ outputFormatter.ts     # è¤‡æ•°å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

// ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½ï¼š
class InteractivePrompts {
  async selectPackages(packages: Package[]): Promise<string[]>;
  async confirmUpdates(updates: Update[]): Promise<boolean>;
  async configurationWizard(): Promise<Configuration>;
}
```

</CodeGroup>

### ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

å…¨å±¤ã«ã‚ãŸã‚‹åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼š

<CodeGroup>

```bash {{ title: 'ãƒ†ã‚¹ãƒˆæ§‹é€ ' }}
â”œâ”€â”€ packages/core/src/**/__tests__/     # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ packages/utils/src/**/__tests__/    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ apps/cli/src/**/__tests__/         # CLIå˜ä½“ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ e2e/                          # ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ integration/                  # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ fixtures/                     # ãƒ†ã‚¹ãƒˆãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â””â”€â”€ .github/workflows/
    â””â”€â”€ test.yml                      # CIãƒ†ã‚¹ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
```

```typescript {{ title: 'ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³' }}
// ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ãƒ†ã‚¹ãƒˆ
describe('Catalog', () => {
  it('should update package version', () => {
    const catalog = new Catalog('default');
    const package = new Package('react', '18.0.0', '18.2.0');

    catalog.addPackage(package);
    catalog.updatePackage('react', new Version('18.2.0'));

    expect(catalog.getPackage('react').currentVersion.toString()).toBe('18.2.0');
  });
});

// CLIçµ±åˆãƒ†ã‚¹ãƒˆ
describe('CheckCommand', () => {
  it('should handle network errors gracefully', async () => {
    const mockService = createMockCatalogService();
    mockService.checkForUpdates.mockRejectedValue(new NetworkError());

    const command = new CheckCommand(mockService);

    await expect(command.execute({})).rejects.toThrow('Network error occurred');
  });
});
```

</CodeGroup>

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

PCUã¯å¤§è¦æ¨¡ãªmonorepoã«å¯¾ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ï¼š

<CodeGroup>

```typescript {{ title: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥' }}
// ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒAPIå‘¼ã³å‡ºã—ã‚’å‰Šæ¸›
class Cache<T> {
  constructor(
    private readonly options: {
      ttl: number; // ç”Ÿå­˜æ™‚é–“
      maxSize: number; // ãƒ¡ãƒ¢ãƒªåˆ¶é™
      persistToDisk: boolean; // ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
      strategy: 'lru' | 'fifo' | 'lfu'; // å‰Šé™¤æˆ¦ç•¥
    }
  ) {}

  async get(key: string): Promise<T | null>;
  async set(key: string, value: T): Promise<void>;
  getStats(): CacheStats; // ãƒ’ãƒƒãƒˆç‡ã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
}
```

```typescript {{ title: 'ä¸¦è¡Œå‡¦ç†' }}
// ã‚ˆã‚Šè‰¯ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãŸã‚ã®ä¸¦åˆ—å‡¦ç†
class NpmRegistryService {
  constructor(private readonly concurrency: number = 5) {}

  async getPackageInfo(names: string[]): Promise<PackageInfo[]> {
    // åˆ¶å¾¡ã•ã‚ŒãŸä¸¦è¡Œæ€§ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒãƒƒãƒå‡¦ç†
    const batches = chunk(names, this.concurrency);
    const results = await Promise.allSettled(batches.map((batch) => this.processBatch(batch)));

    return results.flatMap((result) => (result.status === 'fulfilled' ? result.value : []));
  }
}
```

</CodeGroup>
