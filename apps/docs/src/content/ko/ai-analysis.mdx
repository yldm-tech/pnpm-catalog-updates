export const metadata = {
  title: 'AI 분석',
  description:
    'AI 기반 분석을 사용하여 의존성 업데이트에 대한 지능형 권장 사항, 보안 평가 및 호환성 문제 감지를 얻으세요.',
};

# AI 분석

PCU는 AI CLI 도구와 통합하여 지능형 의존성 분석, 보안 평가 및 업데이트 권장 사항을 제공합니다. {{ className: 'lead' }}

## 개요

AI 분석은 다음과 같은 방식으로 PCU의 기능을 향상시킵니다:

- **영향 분석**: 업데이트가 코드베이스에 어떤 영향을 미치는지 이해
- **보안 평가**: AI 기반 보안 취약점 분석 제공
- **호환성 검사**: 잠재적인 호환성 문제 감지
- **업데이트 권장**: 안전한 업데이트를 위한 지능형 제안 수신

## 지원되는 AI 제공업체

PCU는 사용 가능한 AI CLI 도구를 자동으로 감지하고 다음 우선 순위로 사용합니다:

| 제공업체 | 우선순위 | 기능                     |
| -------- | -------- | ------------------------ |
| Gemini   | 100      | 영향, 보안, 호환성, 권장 |
| Claude   | 80       | 영향, 보안, 호환성, 권장 |
| Codex    | 60       | 영향, 호환성, 권장       |
| Cursor   | 40       | 영향, 권장               |

<Note>
  AI 제공업체를 사용할 수 없는 경우 PCU는 자동으로 규칙 기반 분석 엔진으로 대체되어 사전 정의된
  규칙을 사용한 기본 의존성 분석을 제공합니다.
</Note>

---

## 명령어

### 사용 가능한 AI 제공업체 확인

시스템에서 사용 가능한 AI 도구 보기:

```bash
pcu ai
```

이 명령어는 다음을 표시합니다:

- 시스템에서 감지된 사용 가능한 AI CLI 도구
- 각 제공업체의 버전 정보
- 분석에 사용될 최적의 제공업체

### AI 기반 업데이트

AI 기반 분석으로 의존성 업데이트:

<CodeGroup>

```bash {{ title: '기본 AI 업데이트' }}
pcu update --ai
pcu u --ai
```

```bash {{ title: '대화형 AI 업데이트' }}
pcu update --ai --interactive
pcu u --ai -i
```

</CodeGroup>

AI 향상 업데이트는 다음을 제공합니다:

- 각 업데이트에 대한 지능형 위험 평가
- 설명이 포함된 호환성 문제 감지
- 보안 취약점 식별
- 권장 업데이트 순서

### AI 기반 분석

AI 지원으로 특정 패키지 업데이트 분석:

<CodeGroup>

```bash {{ title: '패키지 분석' }}
pcu analyze react
pcu a lodash
```

```bash {{ title: '특정 버전 분석' }}
pcu analyze react 19.0.0
pcu a typescript 5.5.0
```

</CodeGroup>

<Note>
  `analyze` 명령어는 기본적으로 `default` 카탈로그를 사용합니다. 첫 번째 인수로 다른 카탈로그를
  지정할 수 있습니다: `pcu analyze my-catalog react`
</Note>

---

## 분석 유형

### 영향 분석

의존성 업데이트가 프로젝트에 어떤 영향을 미치는지 평가:

- 해당 의존성을 사용하는 모든 워크스페이스 패키지 식별
- 버전 간 API 변경 분석
- 필요한 마이그레이션 작업량 추정
- 테스트 중점 영역 제안

### 보안 분석

보안 중심 평가 제공:

- 현재 버전의 알려진 취약점 식별
- 새 버전의 보안 수정 확인
- 보안 관련 패키지 업데이트 평가
- 보안 모범 사례 권장

### 호환성 분석

잠재적인 호환성 문제 확인:

- 호환성 문제가 있는 API 변경 감지
- 피어 의존성 충돌 식별
- Node.js 버전 호환성 확인
- TypeScript 호환성 검증

### 권장 사항

실행 가능한 권장 사항 생성:

- 최적의 업데이트 순서 제안
- 버전 범위 권장
- 함께 업데이트해야 할 패키지 식별
- 롤백 전략 제공

---

## 대체 동작

AI 제공업체를 사용할 수 없는 경우 PCU는 내장된 규칙 기반 분석 엔진을 사용합니다:

### 규칙 기반 분석 기능

- **버전 점프 평가**: 시맨틱 버전 변경에 따른 위험 평가
- **알려진 호환성 문제 패턴**: 인기 패키지(React, TypeScript, ESLint 등)의 호환성 문제 감지
- **보안 민감 패키지**: 보안 관련 패키지에 플래그 지정하여 신중히 검토
- **작업량 추정**: 마이그레이션 작업량 추정 제공

### 위험 수준

| 수준   | 설명                                         |
| ------ | -------------------------------------------- |
| 낮음   | 패치 업데이트, 일반적으로 안전하게 적용 가능 |
| 중간   | 마이너 업데이트 또는 큰 마이너 버전 점프     |
| 높음   | 호환성 문제가 있는 메이저 버전 업데이트      |
| 치명적 | 여러 메이저 버전 점프 또는 프리릴리스 버전   |

---

## 구성

### 환경 변수

<Properties>
  <Property name="GEMINI_PATH" type="string">
    Gemini CLI 실행 파일의 사용자 지정 경로
  </Property>
  <Property name="CLAUDE_PATH" type="string">
    Claude CLI 실행 파일의 사용자 지정 경로
  </Property>
  <Property name="CODEX_PATH" type="string">
    Codex CLI 실행 파일의 사용자 지정 경로
  </Property>
  <Property name="CURSOR_PATH" type="string">
    Cursor CLI 실행 파일의 사용자 지정 경로
  </Property>
</Properties>

### 감지 방법

PCU는 AI 제공업체를 감지하기 위해 여러 전략을 사용합니다:

1. **환경 변수**: 사용자 지정 경로 변수 확인
2. **PATH 조회**: `which` 명령어를 사용하여 실행 파일 찾기
3. **알려진 경로**: 일반적인 설치 위치 확인
4. **애플리케이션 경로**: GUI 애플리케이션(예: Cursor.app) 확인

---

## 사용 예시

### 안전한 업데이트 워크플로우

```bash
# AI 분석으로 업데이트 확인
pcu check

# 특정 고위험 업데이트 분석
pcu analyze react 19.0.0
pcu analyze typescript 5.5.0

# AI 가이드 대화형 업데이트 수행
pcu update --ai --interactive --create-backup
```

### CI/CD 통합

```bash
# CI에서 JSON 출력으로 AI 분석 실행
pcu update --ai --dry-run --format json > ai-analysis.json

# 고위험 업데이트 확인
pcu analyze default typescript --format json | jq '.riskLevel'
```

### 일괄 분석

```bash
# AI 권장으로 모든 패키지 업데이트
pcu update --ai --target minor

# AI 분석으로 메이저 업데이트 검토
pcu update --ai --target latest --confirm-major
```

---

## 모범 사례

### AI 분석을 사용해야 할 때

- **메이저 버전 업데이트**: 메이저 버전 업그레이드에는 항상 AI 분석 사용
- **보안 민감 패키지**: 인증, 암호화 및 세션 패키지에 사용
- **대규모 코드베이스**: AI가 모노레포 전반의 영향 영역 식별에 도움
- **호환성 문제 감지**: AI가 상세한 호환성 문제 설명 제공

### 성능 고려 사항

- AI 분석은 표준 업데이트에 비해 처리 시간이 추가됨
- `--dry-run`을 사용하여 변경 사항을 적용하지 않고 AI 권장 사항 미리보기
- AI가 중요하지 않은 경우 더 빠른 CI/CD 파이프라인을 위해 규칙 기반 대체 고려

### 다른 기능과 결합

```bash
# AI 분석과 보안 스캔
pcu update --ai && pcu security

# AI 분석과 백업
pcu update --ai --create-backup

# AI 분석과 특정 대상
pcu update --ai --target minor --exclude "*-dev"
```
