export const metadata = {
  title: 'R√©f√©rence des commandes',
  description:
    "Guide de r√©f√©rence complet pour toutes les commandes, options et mod√®les d'utilisation de pnpm-catalog-updates.",
};

# R√©f√©rence des commandes

R√©f√©rence compl√®te pour toutes les commandes et options PCU. Apprenez chaque commande, drapeau et option de configuration disponible. {{ className: 'lead' }}

## Aper√ßu des commandes

PCU fournit plusieurs commandes principales avec des noms complets et des raccourcis pratiques :

| Commande compl√®te | Raccourcis et alias                       | Description                                                    |
| ----------------- | ----------------------------------------- | -------------------------------------------------------------- |
| `pcu init`        | `pcu i`                                   | Initialiser l'espace de travail PNPM et la configuration PCU   |
| `pcu check`       | `pcu chk`, `pcu -c`, `pcu --check`        | V√©rifier les d√©pendances de catalogue obsol√®tes                |
| `pcu update`      | `pcu u`, `pcu -u`, `pcu --update`         | Mettre √† jour les d√©pendances de catalogue                     |
| `pcu analyze`     | `pcu a`, `pcu -a`, `pcu --analyze`        | Analyser l'impact des mises √† jour de d√©pendances              |
| `pcu workspace`   | `pcu w`, `pcu -s`, `pcu --workspace-info` | Afficher les informations et validation de l'espace de travail |
| `pcu theme`       | `pcu t`, `pcu -t`, `pcu --theme`          | Configurer les th√®mes couleur et param√®tres d'interface        |
| `pcu security`    | `pcu sec`                                 | Analyse et corrections des vuln√©rabilit√©s de s√©curit√©          |
| `pcu ai`          | -                                         | Gestion des fournisseurs AI et tests d'analyse                 |
| `pcu rollback`    | -                                         | Restaurer les mises √† jour du catalogue √† un √©tat pr√©c√©dent    |
| `pcu help`        | `pcu h`, `pcu -h`                         | Afficher l'aide                                                |

### Raccourcis sp√©ciaux

| Raccourci              | Commande √©quivalente       | Description                                                  |
| ---------------------- | -------------------------- | ------------------------------------------------------------ |
| `pcu -i`               | `pcu update --interactive` | Mode de mise √† jour interactive                              |
| `pcu --security-audit` | `pcu security`             | Ex√©cuter l'analyse de s√©curit√©                               |
| `pcu --security-fix`   | `pcu security --fix-vulns` | Ex√©cuter l'analyse de s√©curit√© avec corrections automatiques |

---

## Mode Hybride

PCU dispose du **Mode Hybride** - lorsque vous ex√©cutez une commande sans drapeaux, elle entre automatiquement en mode interactif pour vous guider √† travers les options.

<CodeGroup>

```bash {{ title: 'Sans Drapeaux = Invites Interactives' }}
pcu check        # Invites pour format, cible, options de filtre
pcu update       # Invites pour catalogue, format, cible, etc.
pcu security     # Invites pour format de sortie, filtre de s√©v√©rit√©
```

```bash {{ title: 'Avec Drapeaux = Ex√©cution Directe' }}
pcu check --format table    # S'ex√©cute directement avec les options sp√©cifi√©es
pcu update --target minor   # S'ex√©cute directement avec les options sp√©cifi√©es
```

</CodeGroup>

### Commandes Support√©es

Le mode hybride est disponible pour les commandes suivantes :

| Commande     | Options Interactives                                   |
| ------------ | ------------------------------------------------------ |
| `check`      | Format, cible, prerelease, motifs include/exclude      |
| `update`     | Catalogue, format, cible, sauvegarde, dry-run          |
| `analyze`    | Format                                                 |
| `workspace`  | Validation, statistiques, format                       |
| `theme`      | S√©lection de th√®me, style de barre de progression      |
| `security`   | Format, s√©v√©rit√©, correction automatique               |
| `init`       | Mod√®le, options de framework, assistant interactif     |
| `ai`         | Statut du fournisseur, test, op√©rations de cache       |
| `rollback`   | S√©lection de version, format                           |

### Avantages

- **Flexibilit√©** : Basculez facilement entre l'automatisation pour les scripts et le guidage interactif pour l'exploration
- **D√©couvrabilit√©** : Explorez les fonctionnalit√©s disponibles via des invites interactives sans m√©moriser toutes les options
- **Efficacit√©** : Les utilisateurs avanc√©s utilisent les drapeaux directement tandis que les nouveaux utilisateurs b√©n√©ficient d'une exp√©rience guid√©e

---

## `pcu init` - Initialiser l'espace de travail

Initialiser un environnement d'espace de travail PNPM complet avec la configuration PCU.

<CodeGroup>

```bash {{ title: 'Usage de base' }}
pcu init
pcu i
```

```bash {{ title: 'Avec options' }}
pcu init --force --verbose
pcu init --workspace ./my-project
pcu init --no-create-workspace
```

</CodeGroup>

### Options

<Properties>
  <Property name="--force" type="boolean">
    √âcraser le fichier de configuration existant sans confirmation
  </Property>
  <Property name="--full" type="boolean">
    G√©n√©rer une configuration compl√®te avec toutes les options disponibles
  </Property>
  <Property name="--interactive" type="boolean">
    Lancer l'assistant de configuration interactif avec configuration guid√©e
  </Property>
  <Property name="--template" type="enum">
    Mod√®le de configuration : minimal, standard, full, monorepo, enterprise
  </Property>
  <Property name="--create-workspace" type="boolean" default="true">
    Cr√©er la structure d'espace de travail PNPM si manquante
  </Property>
  <Property name="--no-create-workspace" type="boolean">
    Ignorer la cr√©ation de structure d'espace de travail PNPM
  </Property>
  <Property name="--packages-dir" type="string" default="packages">
    Nom du r√©pertoire pour les packages d'espace de travail
  </Property>
  <Property name="--package-rules" type="boolean" default="true">
    Inclure les r√®gles de packages communes dans la configuration
  </Property>
  <Property name="--typescript" type="boolean">
    Ajouter des r√®gles et param√®tres sp√©cifiques √† TypeScript
  </Property>
  <Property name="--react" type="boolean">
    Ajouter des r√®gles pour l'√©cosyst√®me React
  </Property>
  <Property name="--vue" type="boolean">
    Ajouter des r√®gles pour l'√©cosyst√®me Vue
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Format de sortie : table, json, yaml, minimal
  </Property>
  <Property name="-w, --workspace" type="string">
    R√©pertoire d'espace de travail (d√©faut : r√©pertoire actuel)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Afficher des informations d√©taill√©es et le progr√®s
  </Property>
</Properties>

### Mod√®les de configuration

PCU fournit des mod√®les pr√©configur√©s pour les types de projets courants :

#### Types de mod√®les

- **`minimal`** - Configuration de base avec les param√®tres essentiels uniquement
- **`standard`** - Configuration √©quilibr√©e adapt√©e √† la plupart des projets
- **`full`** - Configuration compl√®te avec toutes les options disponibles
- **`monorepo`** - Optimis√© pour les grands monorepos avec fonctionnalit√©s avanc√©es
- **`enterprise`** - Pr√™t pour l'entreprise avec fonctionnalit√©s de s√©curit√© et gouvernance

<CodeGroup>

```bash {{ title: 'Exemples de mod√®les' }}
# Utiliser le mod√®le minimal
pcu init --template minimal

# Configuration de monorepo d'entreprise
pcu init --template enterprise --interactive

# Projet React avec TypeScript
pcu init --template standard --react --typescript
```

</CodeGroup>

### Assistant de configuration interactive

Le mode interactif (`--interactive`) fournit une exp√©rience de configuration guid√©e :

#### Fonctionnalit√©s de l'assistant

- **D√©tection de projet** : D√©tecte automatiquement le type de projet (React, Vue, TypeScript)
- **Structure d'espace de travail** : D√©couvre les packages existants et sugg√®re une configuration optimale
- **Configuration de r√®gles de packages** : S√©lection interactive de r√®gles de packages et strat√©gies de mise √† jour
- **Configuration de registre** : Configuration pour registres NPM personnalis√©s et authentification
- **R√©glage des performances** : Optimise les param√®tres selon la taille et les exigences du projet
- **S√©lection de th√®me** : Choix de th√®mes couleur et styles de barres de progression
- **Configuration de validation** : Configure les portes de qualit√© et v√©rifications de s√©curit√©

#### Flux de l'assistant

1. **Analyse du projet** : Analyse les fichiers existants pour comprendre la structure du projet
2. **S√©lection de mod√®le** : Recommande des mod√®les appropri√©s bas√©s sur l'analyse
3. **R√®gles de packages** : Configuration interactive de strat√©gies de mise √† jour sp√©cifiques aux packages
4. **Param√®tres avanc√©s** : Configuration optionnelle de mise en cache, performances et param√®tres d'interface
5. **Validation** : V√©rifications pr√©alables et validation de configuration
6. **Cr√©ation de fichiers** : Cr√©e tous les fichiers n√©cessaires avec confirmation

### Fichiers et r√©pertoires cr√©√©s

#### Fichiers principaux

<Properties>
  <Property name=".pcurc.json" type="file">
    Fichier de configuration principal avec tous les param√®tres PCU
  </Property>
  <Property name="package.json" type="file">
    package.json racine de l'espace de travail (cr√©√© si manquant)
  </Property>
  <Property name="pnpm-workspace.yaml" type="file">
    Configuration d'espace de travail PNPM (cr√©√©e si manquante)
  </Property>
</Properties>

#### Structure de r√©pertoire

<Properties>
  <Property name="packages/" type="directory">
    R√©pertoire par d√©faut pour les packages d'espace de travail (personnalisable)
  </Property>
  <Property name="apps/" type="directory">
    Cr√©√© pour le mod√®le monorepo - packages d'applications
  </Property>
  <Property name="tools/" type="directory">
    Cr√©√© pour le mod√®le monorepo - outils de d√©veloppement
  </Property>
  <Property name="docs/" type="directory">
    Cr√©√© pour le mod√®le enterprise - documentation
  </Property>
</Properties>

#### Fichiers sp√©cifiques aux mod√®les

<Properties>
  <Property name=".nvmrc" type="file">
    Sp√©cification de version Node (mod√®le enterprise)
  </Property>
  <Property name=".gitignore" type="file">
    Am√©lior√© avec des motifs sp√©cifiques √† PCU (si manquant)
  </Property>
  <Property name="tsconfig.json" type="file">
    Configuration TypeScript (avec le drapeau --typescript)
  </Property>
</Properties>

### Initialisation avanc√©e

#### Configuration sp√©cifique au framework

<CodeGroup>

```bash {{ title: 'Projet React' }}
# React avec monorepo TypeScript
pcu init --template monorepo --react --typescript --interactive
```

```bash {{ title: 'Projet Vue' }}
# Projet Vue avec configuration standard
pcu init --template standard --vue --packages-dir libs
```

```bash {{ title: 'Configuration Enterprise' }}
# Grand monorepo d'entreprise avec fonctionnalit√©s de s√©curit√©
pcu init --template enterprise --full --interactive
```

</CodeGroup>

#### Structure d'espace de travail personnalis√©e

```bash
# R√©pertoire de packages personnalis√© et structure
pcu init --packages-dir "libs" --create-workspace --verbose

# R√©pertoires de packages multiples (mod√®le monorepo)
pcu init --template monorepo
# Cr√©e : apps/, packages/, tools/, docs/
```

### Validation et v√©rifications de sant√©

La commande init effectue une validation compl√®te :

#### V√©rifications pr√©-initialisation

- **Permissions de r√©pertoire** : Assure l'acc√®s en √©criture au r√©pertoire de l'espace de travail
- **Installation PNPM** : V√©rifie que PNPM est install√© et accessible
- **Configuration existante** : D√©tecte et propose de fusionner les configurations existantes
- **D√©p√¥t Git** : V√©rifie si le r√©pertoire est un d√©p√¥t git

#### Validation post-initialisation

- **Syntaxe de configuration** : Valide les fichiers de configuration g√©n√©r√©s
- **Structure d'espace de travail** : Assure que l'espace de travail PNPM est correctement configur√©
- **D√©couverte de packages** : V√©rifie que PCU peut d√©couvrir les packages d'espace de travail
- **Analyse des d√©pendances** : V√©rification de sant√© de base des d√©pendances existantes

### Exemples d'utilisation

#### D√©marrage rapide

```bash
pcu init
```

Initialise avec le mod√®le standard en utilisant la d√©tection automatique de projet.

#### Configuration interactive

```bash
pcu init --interactive
```

Lance l'assistant de configuration complet avec configuration guid√©e.

#### Initialisation de monorepo

```bash
pcu init --template monorepo --typescript --verbose
```

Cr√©e un monorepo pr√™t pour l'entreprise avec support TypeScript et sortie d√©taill√©e.

#### Configuration Enterprise personnalis√©e

```bash
pcu init --template enterprise --interactive --force
```

Configuration enterprise interactive qui √©crase la configuration existante.

---

## `pcu check` - V√©rifier les mises √† jour

V√©rifier les d√©pendances obsol√®tes dans vos catalogues d'espace de travail pnpm.

<CodeGroup>

```bash {{ title: 'V√©rification de base' }}
pcu check
pcu -c
pcu chk
```

```bash {{ title: 'Usage avanc√©' }}
pcu -c --format minimal
pcu check --catalog node18 --include "react*"
pcu -c --target minor --prerelease
```

</CodeGroup>

### Options

<Properties>
  <Property name="--catalog" type="string">
    V√©rifier uniquement le catalogue sp√©cifique
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Format de sortie : table, json, yaml, minimal
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    Cible de mise √† jour : latest, greatest, minor, patch, newest
  </Property>
  <Property name="--prerelease" type="boolean">
    Inclure les versions pr√©liminaires
  </Property>
  <Property name="--include" type="string">
    Inclure les packages correspondant au motif
  </Property>
  <Property name="--exclude" type="string">
    Exclure les packages correspondant au motif
  </Property>
</Properties>

### Formats de sortie

- **table** : Format de tableau riche avec couleurs et d√©tails
- **minimal** : Style simple npm-check-updates (package ‚Üí version)
- **json** : Sortie JSON pour utilisation programmatique
- **yaml** : Sortie YAML pour fichiers de configuration

---

## `pcu update` - Mettre √† jour les d√©pendances

Mettre √† jour les d√©pendances de catalogue vers des versions plus r√©centes.

<CodeGroup>

```bash {{ title: 'Mise √† jour interactive' }}
pcu update --interactive
pcu -u -i
pcu u -i
```

```bash {{ title: 'Mise √† jour automatis√©e' }}
pcu -u --target minor --create-backup
pcu update --dry-run --verbose
```

</CodeGroup>

### Options

<Properties>
  <Property name="-i, --interactive" type="boolean">
    Mode interactif pour choisir les mises √† jour
  </Property>
  <Property name="-d, --dry-run" type="boolean">
    Pr√©visualiser les modifications sans √©crire de fichiers
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    Cible de mise √† jour : latest, greatest, minor, patch, newest
  </Property>
  <Property name="--catalog" type="string">
    Mettre √† jour uniquement le catalogue sp√©cifique
  </Property>
  <Property name="--force" type="boolean">
    Forcer les mises √† jour m√™me si risqu√©es
  </Property>
  <Property name="-b, --create-backup" type="boolean">
    Cr√©er des fichiers de sauvegarde avant la mise √† jour
  </Property>
  <Property name="--include" type="string">
    Inclure les packages correspondant au motif (peut √™tre utilis√© plusieurs fois)
  </Property>
  <Property name="--exclude" type="string">
    Exclure les packages correspondant au motif (peut √™tre utilis√© plusieurs fois)
  </Property>
  <Property name="--prerelease" type="boolean">
    Inclure les versions pr√©liminaires dans les mises √† jour
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Format de sortie : table, json, yaml, minimal
  </Property>
  <Property name="--batch-size" type="number" default="10">
    Nombre de packages √† traiter en parall√®le
  </Property>
  <Property name="--skip-peer-conflicts" type="boolean">
    Ignorer les packages avec conflits de d√©pendances pairs
  </Property>
  <Property name="--confirm-major" type="boolean" default="true">
    Exiger confirmation pour les mises √† jour de version majeure
  </Property>
</Properties>

### Fonctionnalit√©s interactives

Le mode interactif (`--interactive` ou `-i`) fournit des capacit√©s avanc√©es de s√©lection de packages :

#### Interface de s√©lection de packages

- **Multi-s√©lection** avec cases √† cocher pour mises √† jour individuelles de packages
- **Fonctionnalit√© de recherche** pour filtrer les packages par nom ou description
- **Op√©rations par lots** pour s√©lectionner/d√©s√©lectionner plusieurs packages
- **S√©lection de strat√©gie de mise √† jour** pour chaque package (latest, greatest, minor, patch)

#### R√©solution intelligente de conflits

- **D√©tection de d√©pendances pairs** avec suggestions de r√©solution
- **Avertissements de changements cassants** bas√©s sur l'analyse de versioning s√©mantique
- **Analyse d'impact** montrant les packages d'espace de travail affect√©s
- **Capacit√©s de rollback** si les mises √† jour causent des probl√®mes

#### Suivi de progression

- **Barres de progression en temps r√©el** avec plusieurs styles visuels
- **√âtat de traitement par lots** montrant les mises √† jour termin√©es/en attente
- **R√©cup√©ration d'erreur** avec options ignorer/r√©essayer pour les mises √† jour √©chou√©es
- **Confirmation de succ√®s** avec r√©sum√© de tous les changements effectu√©s

### Strat√©gies de mise √† jour avanc√©es

<CodeGroup>

```bash {{ title: 'Mises √† jour conservatrices' }}
# Uniquement les mises √† jour patch et minor
pcu update --target minor --confirm-major
```

```bash {{ title: 'Mises √† jour agressives' }}
# Inclure prerelease et forcer les mises √† jour major
pcu update --target greatest --prerelease --force
```

```bash {{ title: 'Mises √† jour s√©lectives' }}
# Mettre √† jour des packages sp√©cifiques avec motifs
pcu update --include "react*" --exclude "*-dev" --create-backup
```

```bash {{ title: 'Traitement par lots' }}
# Traiter efficacement les grands espaces de travail
pcu update --batch-size 20 --skip-peer-conflicts
```

</CodeGroup>

### Exemples d'utilisation

#### Mise √† jour interactive s√©curis√©e

```bash
pcu update --interactive --create-backup --target minor
```

Met √† jour les d√©pendances de mani√®re interactive avec sauvegardes automatiques, limitant aux incr√©ments de version mineure uniquement.

#### Mise √† jour s√ªre pour la production

```bash
pcu update --exclude "*-dev" --confirm-major --dry-run
```

Montre ce qui serait mis √† jour dans les d√©pendances de production, n√©cessitant confirmation pour les mises √† jour majeures.

#### Mises √† jour sp√©cifiques au framework

```bash
pcu update --include "react*,@types/*" --prerelease
```

Met √† jour les packages de l'√©cosyst√®me React incluant les d√©finitions TypeScript, autorisant les versions pr√©liminaires.

---

## `pcu analyze` - Analyse d'impact

Analyser l'impact de la mise √† jour d'une d√©pendance sp√©cifique pour comprendre les changements cassants potentiels et packages affect√©s.

<CodeGroup>

```bash {{ title: 'Analyse de base' }}
pcu analyze default react
pcu a default react 18.3.0
pcu -a react17 @types/react
```

```bash {{ title: 'Analyse avanc√©e' }}
pcu analyze default typescript --format json
pcu a my-catalog lodash 4.17.21 --verbose
```

</CodeGroup>

### Arguments

<Properties>
  <Property name="catalog" type="string" required>
    Nom du catalogue (ex : 'default', 'react17')
  </Property>
  <Property name="package" type="string" required>
    Nom du package (ex : 'react', '@types/node')
  </Property>
  <Property name="version" type="string">
    Nouvelle version (optionnelle, par d√©faut derni√®re version)
  </Property>
</Properties>

### Options

<Properties>
  <Property name="-f, --format" type="enum" default="table">
    Format de sortie : table, json, yaml, minimal
  </Property>
</Properties>

### Informations d'analyse

La commande analyze fournit :

- **D√©pendances affect√©es** par la mise √† jour
- **Changements cassants** d√©tect√©s entre versions
- **Packages d'espace de travail** qui utilisent cette d√©pendance
- **Recommandations de mise √† jour** et √©valuation de risque
- **Analyse de compatibilit√©** de version

### Exemples d'utilisation

#### Analyser l'impact de la derni√®re version

```bash
pcu analyze default react
```

Analyse l'impact de mise √† jour de React vers la derni√®re version dans le catalogue par d√©faut.

#### Analyser une version sp√©cifique

```bash
pcu analyze default typescript 5.0.0
```

Analyse l'impact de mise √† jour de TypeScript vers la version 5.0.0.

#### Sortie JSON pour automatisation

```bash
pcu analyze default lodash --format json
```

Sorte les r√©sultats d'analyse en JSON pour traitement programmatique.

---

## `pcu workspace` - Informations de l'espace de travail

Afficher les informations et validation de l'espace de travail avec analyse compl√®te de l'espace de travail.

<CodeGroup>

```bash {{ title: 'Informations de base' }}
pcu workspace
pcu w
```

```bash {{ title: 'Validation et statistiques' }}
pcu workspace --validate
pcu workspace --stats
pcu w --validate --stats --format json
```

</CodeGroup>

### Options

<Properties>
  <Property name="--validate" type="boolean">
    Valider la configuration et structure de l'espace de travail
  </Property>
  <Property name="-s, --stats" type="boolean">
    Afficher les statistiques d√©taill√©es de l'espace de travail
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Format de sortie : table, json, yaml, minimal
  </Property>
</Properties>

### Informations de sortie

#### Mode informations de base (par d√©faut)

- Nom et chemin de l'espace de travail
- Nombre total de packages
- Nombre de catalogues
- Liste des noms de catalogues

#### Mode validation (`--validate`)

- Validation du fichier de configuration
- Validation de la structure de l'espace de travail
- V√©rifications de coh√©rence package.json
- V√©rification d'int√©grit√© des catalogues
- Codes de sortie : 0 (valide), 1 (probl√®mes trouv√©s)

#### Mode statistiques (`--stats`)

- R√©partition d√©taill√©e des packages
- Analyse des d√©pendances
- Statistiques d'usage des catalogues
- M√©triques de sant√© de l'espace de travail

### Exemples d'utilisation

#### Informations de base de l'espace de travail

```bash
pcu workspace
```

Affiche le nom de l'espace de travail, chemin, nombre de packages et catalogues disponibles.

#### Validation compl√®te

```bash
pcu workspace --validate
```

Valide la configuration et structure de l'espace de travail, sort avec code appropri√©.

#### Statistiques d√©taill√©es

```bash
pcu workspace --stats --format json
```

Montre les statistiques d√©taill√©es de l'espace de travail en format JSON.

#### Analyse combin√©e

```bash
pcu w --validate --stats
```

Effectue validation et affiche les statistiques ensemble.

---

## `pcu security` - Analyse des vuln√©rabilit√©s de s√©curit√©

Analyse compl√®te des vuln√©rabilit√©s de s√©curit√© utilisant npm audit et int√©gration Snyk optionnelle, avec capacit√©s de correction automatis√©e.

<CodeGroup>

```bash {{ title: 'Analyse de s√©curit√© de base' }}
pcu security
pcu sec
```

```bash {{ title: 'Analyse de s√©curit√© avanc√©e' }}
pcu security --fix-vulns --severity high
pcu sec --snyk --include-dev --verbose
pcu security --format json --workspace ./my-project
```

```bash {{ title: 'Int√©gration CI/CD' }}
pcu security --format json --severity critical > security-report.json
pcu sec --auto-fix --no-color
```

</CodeGroup>

### Options

<Properties>
  <Property name="--audit" type="boolean" default="true">
    Effectuer l'analyse npm audit (activ√©e par d√©faut)
  </Property>
  <Property name="--fix-vulns" type="boolean">
    Corriger automatiquement les vuln√©rabilit√©s en utilisant npm audit fix
  </Property>
  <Property name="--severity" type="enum">
    Filtrer par niveau de s√©v√©rit√© : low, moderate, high, critical
  </Property>
  <Property name="--include-dev" type="boolean">
    Inclure les d√©pendances de d√©veloppement dans l'analyse de vuln√©rabilit√©
  </Property>
  <Property name="--snyk" type="boolean">
    Inclure l'analyse de s√©curit√© Snyk (n√©cessite l'installation de snyk CLI)
  </Property>
  <Property name="--auto-fix" type="boolean">
    Appliquer automatiquement les corrections de s√©curit√© sans confirmation
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Format de sortie : table, json, yaml, minimal
  </Property>
  <Property name="-w, --workspace" type="string">
    Chemin du r√©pertoire de l'espace de travail (par d√©faut r√©pertoire actuel)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Afficher les informations d√©taill√©es de vuln√©rabilit√© et √©tapes de rem√©diation
  </Property>
</Properties>

### Fonctionnalit√©s du rapport de s√©curit√©

La commande security fournit une analyse compl√®te des vuln√©rabilit√©s :

- **Int√©gration multi-scanners** : Combine npm audit et Snyk pour une couverture compl√®te
- **Classification de s√©v√©rit√©** : Cat√©gorise les vuln√©rabilit√©s comme critiques, √©lev√©es, mod√©r√©es, faibles et info
- **Rem√©diation automatis√©e** : Applique les correctifs de s√©curit√© automatiquement avec `--fix-vulns`
- **Recommandations de packages** : Sugg√®re des mises √† jour de version sp√©cifiques pour r√©soudre les vuln√©rabilit√©s
- **D√©pendances de d√©veloppement** : Inclusion/exclusion optionnelle des d√©pendances dev
- **Informations CWE/CVE** : Identifiants et descriptions d√©taill√©s des vuln√©rabilit√©s
- **Codes de sortie** : Retourne des codes appropri√©s (0 pour propre, 1 pour vuln√©rabilit√©s trouv√©es)
- **Pr√™t pour CI/CD** : Sortie JSON et mode non-interactif pour automatisation

### Exemples d'utilisation

#### Analyse de vuln√©rabilit√© de base

```bash
pcu security
```

Effectue une analyse de s√©curit√© standard utilisant npm audit, affichant les r√©sultats dans un tableau format√©.

#### Analyse avec corrections automatiques

```bash
pcu security --fix-vulns
```

Analyse les vuln√©rabilit√©s et applique automatiquement les corrections de s√©curit√© disponibles.

#### Filtre de s√©v√©rit√© √©lev√©e

```bash
pcu security --severity high
```

Montre uniquement les vuln√©rabilit√©s de s√©v√©rit√© √©lev√©e et critiques, filtrant les probl√®mes de moindre priorit√©.

#### Analyse compl√®te avec Snyk

```bash
pcu security --snyk --include-dev --verbose
```

Ex√©cute √† la fois npm audit et analyse Snyk, incluant les d√©pendances de d√©veloppement avec informations d√©taill√©es de vuln√©rabilit√©.

#### Int√©gration pipeline CI/CD

```bash
pcu security --format json --severity critical --no-color > security-report.json
```

Exporte les vuln√©rabilit√©s de s√©curit√© critiques en JSON pour traitement automatis√© dans pipelines CI/CD.

#### Correction automatique pour production

```bash
pcu security --auto-fix --severity moderate --exclude-dev
```

Corrige automatiquement les vuln√©rabilit√©s de s√©v√©rit√© mod√©r√©e et sup√©rieure dans les d√©pendances de production uniquement.

### Int√©gration de flux de travail de s√©curit√©

#### V√©rification de s√©curit√© pr√©-d√©ploiement

```bash
# Faire √©chouer la build si vuln√©rabilit√©s critiques existent
pcu security --severity critical
if [ $? -ne 0 ]; then
  echo "Vuln√©rabilit√©s de s√©curit√© critiques trouv√©es. Build √©chou√©e."
  exit 1
fi
```

#### Maintenance de s√©curit√© automatis√©e

```bash
# Maintenance de s√©curit√© hebdomadaire
pcu security --fix-vulns --severity moderate --create-backup
```

---

## `pcu theme` - Configuration de th√®me

Configurer les th√®mes couleur et apparence de l'interface.

<CodeGroup>

```bash {{ title: 'Gestion de th√®me' }}
pcu theme --list
pcu -t --set modern
pcu theme --interactive
```

</CodeGroup>

### Options

<Properties>
  <Property name="-s, --set" type="string">
    D√©finir le th√®me couleur : default, modern, minimal, neon
  </Property>
  <Property name="-l, --list" type="boolean">
    Lister tous les th√®mes disponibles avec √©chantillons d'aper√ßu
  </Property>
  <Property name="-i, --interactive" type="boolean">
    Lancer l'assistant de configuration de th√®me interactif avec aper√ßu en direct
  </Property>
  <Property name="--preview" type="boolean">
    Afficher l'aper√ßu du th√®me sans appliquer les modifications
  </Property>
  <Property name="--progress-style" type="enum">
    D√©finir le style de barre de progression : default, gradient, fancy, minimal, rainbow, neon
  </Property>
  <Property name="--environment" type="enum">
    D√©finir le pr√©r√©glage sp√©cifique √† l'environnement : development, production, presentation
  </Property>
  <Property name="--reset" type="boolean">
    R√©initialiser tous les param√®tres de th√®me aux valeurs par d√©faut
  </Property>
</Properties>

### Th√®mes disponibles

#### Th√®mes principaux

- **`default`** - Couleurs √©quilibr√©es optimis√©es pour usage g√©n√©ral de terminal
- **`modern`** - Couleurs vives parfaites pour environnements de d√©veloppement avec coloration syntaxique
- **`minimal`** - Design monochrome propre id√©al pour environnements de production et CI/CD
- **`neon`** - Couleurs cyberpunk √† contraste √©lev√© con√ßues pour pr√©sentations et d√©mos

#### Styles de barres de progression

- **`default`** - Indication de progression standard
- **`gradient`** - Transitions de couleur douces
- **`fancy`** - Effets visuels riches avec animations
- **`minimal`** - Barres de progression propres et simples
- **`rainbow`** - Progression anim√©e multi-couleurs
- **`neon`** - Barres de progression √† effet lumineux

#### Pr√©r√©glages d'environnement

- **`development`** - Couleur compl√®te, progression d√©taill√©e, sortie verbeuse
- **`production`** - Couleurs minimales, informations essentielles uniquement
- **`presentation`** - Contraste √©lev√©, grandes polices, effets dramatiques

### Fonctionnalit√©s de th√®me avanc√©es

#### Mappage de couleurs s√©mantiques

- **Succ√®s** - Tons verts pour op√©rations termin√©es
- **Avertissement** - Jaune/ambre pour √©tats de pr√©caution
- **Erreur** - Tons rouges pour √©checs et probl√®mes critiques
- **Info** - Tons bleus pour messages informatifs
- **Progression** - Couleurs dynamiques pour op√©rations en cours
- **Surbrillance** - Couleurs d'accent pour informations importantes

#### Configuration de th√®me interactive

Le mode interactif fournit :

- **Aper√ßu en direct** de th√®mes avec sortie √©chantillon
- **S√©lection de couleur personnalis√©e** avec support code hex
- **D√©tection d'environnement** avec param√®tres optimaux automatiques
- **Test de barres de progression** pour voir diff√©rents styles en action
- **Export/import** de configurations de th√®mes
- **Th√®mes par espace de travail** pour stylisation sp√©cifique au projet

### Exemples d'utilisation

#### Lister les th√®mes disponibles

```bash
pcu theme --list
```

Montre tous les th√®mes disponibles avec descriptions.

#### D√©finir directement un th√®me

```bash
pcu theme --set modern
pcu -t --set neon
```

D√©finit directement un th√®me sp√©cifique.

#### Configuration de th√®me interactive

```bash
pcu theme --interactive
pcu -t -i
```

Lance un assistant de s√©lection de th√®me guid√© qui permet de pr√©visualiser les th√®mes et configurer les param√®tres d'interface de mani√®re interactive.

---

## `pcu ai` - Gestion des Fournisseurs AI

V√©rifier le statut des fournisseurs AI et g√©rer le cache d'analyse AI.

<CodeGroup>

```bash {{ title: 'V√©rifier le Statut' }}
pcu ai
pcu ai --status
```

```bash {{ title: 'Test et Cache' }}
pcu ai --test
pcu ai --cache-stats
pcu ai --clear-cache
```

</CodeGroup>

### Options

<Properties>
  <Property name="--status" type="boolean">
    Afficher le statut de tous les fournisseurs AI (comportement par d√©faut)
  </Property>
  <Property name="--test" type="boolean">
    Tester l'analyse AI avec une requ√™te exemple
  </Property>
  <Property name="--cache-stats" type="boolean">
    Afficher les statistiques du cache d'analyse AI
  </Property>
  <Property name="--clear-cache" type="boolean">
    Vider le cache d'analyse AI
  </Property>
</Properties>

### D√©tection des Fournisseurs

La commande d√©tecte automatiquement les fournisseurs AI disponibles :

| Fournisseur | Priorit√© | M√©thode de D√©tection |
| ----------- | -------- | -------------------- |
| Claude      | 100      | CLI `claude`         |
| Gemini      | 80       | CLI `gemini`         |
| Codex       | 60       | CLI `codex`          |

### Exemples d'utilisation

```bash
# Voir le statut des fournisseurs AI
pcu ai

# Tester l'analyse AI avec le fournisseur par d√©faut
pcu ai --test

# Voir les statistiques du cache
pcu ai --cache-stats

# Vider le cache en cas de probl√®mes
pcu ai --clear-cache
```

---

## `pcu rollback` - Restauration de sauvegarde

Restaurer les mises √† jour du catalogue √† un √©tat pr√©c√©dent en utilisant les fichiers de sauvegarde cr√©√©s lors des mises √† jour.

<CodeGroup>

```bash {{ title: 'Lister les sauvegardes' }}
pcu rollback --list
pcu rollback -l
```

```bash {{ title: 'Op√©rations de restauration' }}
pcu rollback --latest
pcu rollback --select
pcu rollback --delete-all
```

</CodeGroup>

### Options

<Properties>
  <Property name="-l, --list" type="boolean">
    Lister tous les fichiers de sauvegarde disponibles avec horodatages
  </Property>
  <Property name="--latest" type="boolean">
    Restaurer automatiquement la sauvegarde la plus r√©cente
  </Property>
  <Property name="--select" type="boolean">
    S√©lection interactive de la sauvegarde √† restaurer
  </Property>
  <Property name="--delete-all" type="boolean">
    Supprimer tous les fichiers de sauvegarde (n√©cessite confirmation)
  </Property>
  <Property name="-w, --workspace" type="string">
    Chemin du r√©pertoire de l'espace de travail (par d√©faut : r√©pertoire actuel)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Afficher les informations d√©taill√©es pendant la restauration
  </Property>
</Properties>

### Syst√®me de sauvegarde

PCU cr√©e automatiquement des fichiers de sauvegarde lorsque vous utilisez le drapeau `--create-backup` avec la commande update :

```bash
pcu update --create-backup
```

Les fichiers de sauvegarde sont stock√©s avec des horodatages et contiennent l'√©tat original de `pnpm-workspace.yaml` avant les mises √† jour.

### Exemples d'utilisation

#### Lister les sauvegardes disponibles

```bash
pcu rollback --list
```

Affiche tous les fichiers de sauvegarde avec leurs horodatages de cr√©ation et tailles de fichier.

#### Restaurer la derni√®re sauvegarde

```bash
pcu rollback --latest
```

Restaure automatiquement la sauvegarde la plus r√©cente sans demander.

#### S√©lection interactive de sauvegarde

```bash
pcu rollback --select
```

Ouvre une invite interactive pour s√©lectionner quelle sauvegarde restaurer.

#### Nettoyer les anciennes sauvegardes

```bash
pcu rollback --delete-all --verbose
```

Supprime tous les fichiers de sauvegarde avec invite de confirmation et sortie d√©taill√©e.

---

## Fonctionnalit√©s interactives et suivi de progression

PCU fournit des capacit√©s interactives avanc√©es et un suivi de progression sophistiqu√© pour toutes les commandes.

### Interface de commande interactive

#### Syst√®me de s√©lection de packages

- **Multi-s√©lection intelligente** : Choisissez des packages sp√©cifiques avec cases visuelles et raccourcis clavier
- **Recherche et filtre** : Filtrage de packages en temps r√©el avec correspondance de motifs et recherche floue
- **Op√©rations par lots** : S√©lectionner/d√©s√©lectionner des groupes entiers avec s√©lection bas√©e sur cat√©gories
- **Aper√ßu d'impact** : Voir les changements potentiels avant d'appliquer toute mise √† jour

#### Assistant de configuration

L'assistant de configuration interactif (`pcu init --interactive`) fournit :

- **D√©tection d'espace de travail** : D√©couverte automatique des espaces de travail PNPM existants
- **S√©lection de mod√®le** : Choisir entre mod√®les de configuration minimaux et complets
- **Configuration de r√®gles de packages** : Configurer des r√®gles pour diff√©rentes cat√©gories de packages (React, Vue, TypeScript)
- **Configuration de registre** : Configurer des registres NPM personnalis√©s et authentification
- **Param√®tres de validation** : Configurer des portes de qualit√© et v√©rifications de s√©curit√©

#### Navigateur de r√©pertoires et fichiers

- **Navigation d'espace de travail** : Navigateur de syst√®me de fichiers int√©gr√© pour s√©lection d'espace de travail
- **Validation de chemin** : Validation en temps r√©el des chemins et structures d'espaces de travail
- **Mode aper√ßu** : Voir le contenu de l'espace de travail avant confirmation de s√©lection

### Suivi de progression avanc√©

#### Barres de progression multi-styles

PCU offre six styles diff√©rents de barres de progression, configurables par commande ou globalement :

<CodeGroup>

```bash {{ title: 'Exemples de styles' }}
# Utiliser des barres de progression en d√©grad√©
pcu update --progress-style gradient

# Progression anim√©e arc-en-ciel
pcu check --progress-style rainbow

# Minimal pour environnements CI/CD
pcu security --progress-style minimal
```

</CodeGroup>

#### Fonctionnalit√©s de progression

- **Suivi multi-√©tapes** : Montre la progression √† travers diff√©rentes phases (scan ‚Üí analyze ‚Üí update)
- **√âtat d'op√©ration parall√®le** : Barres de progression individuelles pour op√©rations simultan√©es
- **M√©triques de performance** : Indicateurs de vitesse en temps r√©el, calculs ETA, temps √©coul√©
- **Affichage s√ªr pour m√©moire** : Sortie multi-lignes stable qui r√©duit le scintillement du terminal

#### √âtat de traitement par lots

- **Gestion de file d'attente** : Montre les op√©rations de packages en attente, actives et termin√©es
- **R√©solution de conflits** : Gestion interactive des conflits de d√©pendances pairs
- **R√©cup√©ration d'erreur** : Options ignorer/r√©essayer pour op√©rations √©chou√©es avec contexte d'erreur d√©taill√©
- **Capacit√©s de rollback** : Annuler les modifications si des probl√®mes sont d√©tect√©s durant les mises √† jour

### Gestion d'erreurs et r√©cup√©ration

#### D√©tection d'erreur intelligente

- **Erreurs de validation** : V√©rifications pr√©alables avec suggestions utiles pour erreurs communes
- **Probl√®mes r√©seau** : R√©essai automatique avec backoff exponentiel pour √©checs de registre
- **Conflits de d√©pendances** : Analyse d√©taill√©e de conflits avec recommandations de r√©solution
- **Probl√®mes de permissions** : Conseils clairs pour probl√®mes de permissions de syst√®me de fichiers

#### Options de r√©cup√©ration interactive

- **Ignorer et continuer** : Ignorer les packages probl√©matiques et continuer avec les mises √† jour restantes
- **R√©essayer avec options** : R√©essayer les op√©rations √©chou√©es avec param√®tres diff√©rents
- **Rollback des modifications** : Annuler les modifications partielles si des probl√®mes surviennent durant op√©rations par lots
- **Exporter rapport d'erreur** : G√©n√©rer des rapports d'erreur d√©taill√©s pour d√©pannage

### Int√©gration d'espace de travail

#### Fonctionnalit√©s de d√©couverte automatique

- **D√©tection d'espace de travail PNPM** : Trouve et valide automatiquement les configurations d'espace de travail
- **D√©couverte de catalogue** : D√©tecte les catalogues existants et leurs mappages de packages
- **Analyse de packages** : Analyse la structure de l'espace de travail et relations de d√©pendances
- **H√©ritage de configuration** : Applique automatiquement les param√®tres sp√©cifiques √† l'espace de travail

#### Validation et v√©rifications de sant√©

- **Validation de structure** : Assure que l'espace de travail suit les bonnes pratiques PNPM
- **Coh√©rence des d√©pendances** : V√©rifie les incompatibilit√©s de version entre packages
- **Int√©grit√© de configuration** : Valide la configuration PCU contre la structure de l'espace de travail
- **M√©triques de sant√©** : Fournit une √©valuation compl√®te de sant√© de l'espace de travail

### Exemples d'utilisation

#### Mise √† jour interactive avec fonctionnalit√©s avanc√©es

```bash
pcu update --interactive --progress-style fancy --batch-size 15
```

Lance mise √† jour interactive avec barres de progression fantaisie et traitement par lots optimis√©.

#### Configuration avec aper√ßu

```bash
pcu init --interactive --preview --verbose
```

Ex√©cute l'assistant de configuration avec mode aper√ßu et journalisation d√©taill√©e.

#### Flux de travail de r√©cup√©ration d'erreur

```bash
pcu update --interactive --create-backup --confirm-major
```

Met √† jour avec r√©cup√©ration d'erreur interactive, sauvegardes automatiques et confirmation de version majeure.

---

## Options globales

Ces options fonctionnent avec toutes les commandes et peuvent √™tre d√©finies via variables d'environnement :

<Properties>
  <Property name="-w, --workspace" type="string" env="PCU_WORKSPACE">
    Chemin du r√©pertoire d'espace de travail
  </Property>
  <Property name="-v, --verbose" type="boolean" env="PCU_VERBOSE">
    Activer la journalisation verbeuse avec sortie d√©taill√©e
  </Property>
  <Property name="--no-color" type="boolean" env="PCU_NO_COLOR">
    D√©sactiver la sortie color√©e pour environnements CI/CD
  </Property>
  <Property name="--registry" type="string" env="PCU_REGISTRY">
    Remplacer l'URL du registre NPM
  </Property>
  <Property name="--timeout" type="number" env="PCU_TIMEOUT">
    D√©lai d'expiration de requ√™te en millisecondes (d√©faut : 30000)
  </Property>
  <Property name="--config" type="string" env="PCU_CONFIG">
    Chemin vers fichier de configuration personnalis√©
  </Property>
  <Property name="-V, --version" type="boolean">
    Afficher le num√©ro de version et v√©rifier les mises √† jour
  </Property>
  <Property name="-h, --help" type="boolean">
    Afficher l'aide pour la commande
  </Property>
</Properties>

### Utilisation de variables d'environnement

Toutes les options globales et param√®tres sp√©cifiques aux commandes peuvent √™tre configur√©s via variables d'environnement :

#### Variables d'environnement principales

<Properties>
  <Property name="PCU_WORKSPACE" type="string">
    Chemin du r√©pertoire d'espace de travail par d√©faut
  </Property>
  <Property name="PCU_VERBOSE" type="boolean">
    Activer la journalisation verbeuse globalement
  </Property>
  <Property name="PCU_NO_COLOR" type="boolean">
    D√©sactiver la sortie color√©e (utile pour CI/CD)
  </Property>
  <Property name="PCU_REGISTRY" type="string">
    URL du registre NPM par d√©faut
  </Property>
  <Property name="PCU_TIMEOUT" type="number">
    D√©lai d'expiration de requ√™te en millisecondes
  </Property>
  <Property name="PCU_CONFIG" type="string">
    Chemin vers fichier de configuration personnalis√©
  </Property>
</Properties>

#### Variables d'environnement sp√©cifiques aux commandes

<Properties>
  <Property name="PCU_CATALOG" type="string">
    Catalogue par d√©faut √† utiliser pour op√©rations check/update
  </Property>
  <Property name="PCU_OUTPUT_FORMAT" type="enum">
    Format de sortie par d√©faut : table, json, yaml, minimal
  </Property>
  <Property name="PCU_UPDATE_TARGET" type="enum">
    Cible de mise √† jour par d√©faut : latest, greatest, minor, patch, newest
  </Property>
  <Property name="PCU_PRERELEASE" type="boolean">
    Inclure les versions pr√©liminaires par d√©faut
  </Property>
  <Property name="PCU_INCLUDE" type="string">
    Motif d'inclusion de packages par d√©faut
  </Property>
  <Property name="PCU_EXCLUDE" type="string">
    Motif d'exclusion de packages par d√©faut
  </Property>
  <Property name="PCU_INTERACTIVE" type="boolean">
    Activer le mode interactif par d√©faut
  </Property>
  <Property name="PCU_DRY_RUN" type="boolean">
    Activer le mode dry-run par d√©faut
  </Property>
  <Property name="PCU_FORCE" type="boolean">
    Forcer les mises √† jour sans confirmation
  </Property>
  <Property name="PCU_CREATE_BACKUP" type="boolean">
    Cr√©er des fichiers de sauvegarde avant les mises √† jour
  </Property>
</Properties>

#### Variables d'environnement de th√®me et affichage

<Properties>
  <Property name="PCU_THEME" type="enum">
    Th√®me couleur par d√©faut : default, modern, minimal, neon
  </Property>
  <Property name="PCU_PROGRESS_STYLE" type="enum">
    Style de barre de progression : default, gradient, fancy, minimal, rainbow, neon
  </Property>
  <Property name="PCU_ENVIRONMENT" type="enum">
    Pr√©r√©glage d'environnement : development, production, presentation
  </Property>
</Properties>

#### Variables d'environnement de s√©curit√© et cache

<Properties>
  <Property name="PCU_SECURITY_SEVERITY" type="enum">
    Filtre de s√©v√©rit√© de s√©curit√© par d√©faut : low, moderate, high, critical
  </Property>
  <Property name="PCU_AUTO_FIX" type="boolean">
    Corriger automatiquement les vuln√©rabilit√©s
  </Property>
  <Property name="PCU_CACHE_ENABLED" type="boolean">
    Activer/d√©sactiver le syst√®me de cache
  </Property>
  <Property name="PCU_CACHE_TTL" type="number">
    Dur√©e de vie du cache en millisecondes
  </Property>
  <Property name="PCU_CACHE_DIR" type="string">
    Chemin du r√©pertoire de cache personnalis√©
  </Property>
</Properties>

#### Variables d'environnement de configuration avanc√©e

<Properties>
  <Property name="PCU_CONCURRENCY" type="number">
    Nombre de requ√™tes r√©seau parall√®les
  </Property>
  <Property name="PCU_BATCH_SIZE" type="number">
    Nombre de packages √† traiter par lots
  </Property>
  <Property name="PCU_RETRIES" type="number">
    Nombre de tentatives de r√©essai pour op√©rations √©chou√©es
  </Property>
  <Property name="PCU_CHECK_UPDATES" type="boolean">
    V√©rifier les mises √† jour PCU CLI au d√©marrage
  </Property>
</Properties>

### Exemples de variables d'environnement

<CodeGroup>

```bash {{ title: 'Environnement de d√©veloppement' }}
# Configuration de d√©veloppement avec fonctionnalit√©s compl√®tes
export PCU_WORKSPACE="./my-workspace"
export PCU_VERBOSE=true
export PCU_THEME="modern"
export PCU_PROGRESS_STYLE="fancy"
export PCU_INTERACTIVE=true
export PCU_CREATE_BACKUP=true
```

```bash {{ title: 'Environnement de production' }}
# Configuration de production avec sortie minimale
export PCU_THEME="minimal"
export PCU_NO_COLOR=true
export PCU_PROGRESS_STYLE="minimal"
export PCU_VERBOSE=false
export PCU_DRY_RUN=true
```

```bash {{ title: 'Environnement CI/CD' }}
# Optimis√© pour pipelines automatis√©s
export PCU_NO_COLOR=true
export PCU_OUTPUT_FORMAT="json"
export PCU_CHECK_UPDATES=false
export PCU_TIMEOUT=120000
export PCU_RETRIES=5
```

```bash {{ title: 'Configuration ax√©e s√©curit√©' }}
# Analyse de s√©curit√© am√©lior√©e
export PCU_SECURITY_SEVERITY="moderate"
export PCU_AUTO_FIX=true
export PCU_INCLUDE_DEV=false
export PCU_FORCE=false
```

</CodeGroup>

### Priorit√© de configuration

Les param√®tres sont appliqu√©s dans cet ordre (les derniers remplacent les premiers) :

1. Valeurs par d√©faut int√©gr√©es
2. Configuration globale (`~/.pcurc.json`)
3. Configuration projet (`.pcurc.json`)
4. Variables d'environnement (`PCU_*`)
5. Drapeaux de ligne de commande (priorit√© la plus √©lev√©e)

---

## Syst√®me de mise √† jour automatique

PCU inclut un m√©canisme de mise √† jour automatique sophistiqu√© qui maintient l'outil CLI √† jour avec les derni√®res fonctionnalit√©s et correctifs de s√©curit√©.

### V√©rification automatique de mise √† jour

Par d√©faut, PCU v√©rifie les mises √† jour quand vous ex√©cutez toute commande :

<CodeGroup>

```bash {{ title: 'Op√©ration normale' }}
# PCU v√©rifie automatiquement les mises √† jour
pcu check
# La sortie peut inclure : "üì¶ PCU v0.8.0 est disponible (actuel : v0.7.15)"
```

```bash {{ title: 'D√©sactiver v√©rifications de mise √† jour' }}
# D√©sactiver pour une seule commande
pcu check --no-update-check

# D√©sactiver globalement via environnement
export PCU_SKIP_VERSION_CHECK=true
pcu check
```

</CodeGroup>

### Comportement de mise √† jour

#### D√©tection d'environnement CI/CD

PCU d√©tecte automatiquement les environnements CI/CD et ignore les v√©rifications de mise √† jour pour √©viter de perturber les pipelines automatis√©s :

- **GitHub Actions** : D√©tect√© via variable d'environnement `GITHUB_ACTIONS`
- **CircleCI** : D√©tect√© via variable d'environnement `CIRCLECI`
- **Jenkins** : D√©tect√© via variable d'environnement `JENKINS_URL`
- **GitLab CI** : D√©tect√© via variable d'environnement `GITLAB_CI`
- **Azure DevOps** : D√©tect√© via variable d'environnement `TF_BUILD`
- **CI g√©n√©rique** : D√©tect√© via variable d'environnement `CI`

#### Installation de mise √† jour

PCU prend en charge plusieurs gestionnaires de packages avec fallback automatique :

```bash
# PCU essaie dans l'ordre : npm ‚Üí pnpm ‚Üí yarn
npm install -g pcu@latest
# Si npm √©choue, essaie :
pnpm add -g pnpm-catalog-updates@latest
# Si pnpm √©choue, essaie :
yarn global add pnpm-catalog-updates@latest
```

### Options de configuration

#### Variables d'environnement

<Properties>
  <Property name="PCU_SKIP_VERSION_CHECK" type="boolean">
    D√©sactiver compl√®tement la v√©rification de version et notifications de mise √† jour
  </Property>
  <Property name="PCU_UPDATE_CHECK_INTERVAL" type="number">
    Heures entre v√©rifications de mise √† jour (d√©faut : 24)
  </Property>
  <Property name="PCU_AUTO_UPDATE" type="boolean">
    Installer automatiquement les mises √† jour sans demande (utiliser avec pr√©caution)
  </Property>
  <Property name="PCU_UPDATE_TIMEOUT" type="number">
    D√©lai d'expiration pour requ√™tes de v√©rification de mise √† jour en millisecondes (d√©faut : 5000)
  </Property>
</Properties>

#### Param√®tres de fichier de configuration

```json
{
  "updates": {
    "checkForUpdates": true,
    "autoUpdate": false,
    "checkInterval": 86400000,
    "timeout": 5000,
    "skipInCI": true,
    "notifyPrerelease": false
  }
}
```

### Notifications de mise √† jour

#### Notification standard

```bash
pcu check
# ‚ú® PCU v0.8.0 est disponible (actuel : v0.7.15)
# Ex√©cutez 'npm install -g pcu@latest' pour mettre √† jour
# Utilisez --no-update-check pour d√©sactiver ce message
```

#### Notification de mise √† jour de s√©curit√©

```bash
pcu security
# üîí MISE √Ä JOUR DE S√âCURIT√â : PCU v0.7.16 contient des correctifs de s√©curit√© (actuel : v0.7.15)
# Mettez √† jour imm√©diatement : npm install -g pcu@latest
```

#### Notification prerelease

```bash
# Montr√©e uniquement si notifyPrerelease: true
pcu check
# üß™ PCU v0.8.0-beta.1 est disponible pour test (actuel : v0.7.15)
# Installer avec : npm install -g pcu@beta
```

### Commandes de mise √† jour manuelle

<CodeGroup>

```bash {{ title: 'V√©rifier statut de mise √† jour' }}
# V√©rifier version actuelle et mises √† jour disponibles
pcu --version
pcu -V
```

```bash {{ title: 'Mise √† jour manuelle' }}
# Mettre √† jour via npm
npm install -g pcu@latest

# Mettre √† jour via pnpm
pnpm add -g pnpm-catalog-updates@latest

# Mettre √† jour vers version sp√©cifique
npm install -g pcu@0.8.0
```

</CodeGroup>

### D√©pannage des mises √† jour

#### √âchecs de v√©rification de mise √† jour

```bash
# Si la v√©rification de mise √† jour √©choue √† cause de probl√®mes r√©seau
PCU_UPDATE_TIMEOUT=10000 pcu check

# Forcer la v√©rification de mise √† jour m√™me en CI
PCU_SKIP_VERSION_CHECK=false CI=false pcu check
```

#### Effacement de cache

```bash
# Effacer le cache de v√©rification de mise √† jour
rm -rf ~/.pcu/cache/version-check

# Ou d√©sactiver compl√®tement la mise en cache
PCU_CACHE_ENABLED=false pcu check
```

#### Probl√®mes de permissions

```bash
# Corriger les probl√®mes de permissions npm
npm config set prefix ~/.npm-global
export PATH=~/.npm-global/bin:$PATH

# Ou utiliser pnpm/yarn qui g√®rent mieux les permissions
pnpm add -g pnpm-catalog-updates@latest
```

---

## Syst√®me de gestion de cache

PCU inclut un syst√®me de cache complet pour optimiser les performances et r√©duire les requ√™tes r√©seau.

### Types de cache

#### Cache de registre

Stocke les m√©tadonn√©es de packages NPM et informations de version :

- **TTL par d√©faut** : 1 heure (3 600 000ms)
- **Taille max** : 10MB par type de cache
- **Entr√©es max** : 500 packages
- **Persistance disque** : Activ√©e

#### Cache d'espace de travail

Stocke la configuration d'espace de travail et r√©sultats d'analyse package.json :

- **TTL par d√©faut** : 5 minutes (300 000ms)
- **Taille max** : 5MB
- **Entr√©es max** : 200 espaces de travail
- **Persistance disque** : D√©sactiv√©e (m√©moire uniquement)

### Configuration de cache

#### Variables d'environnement

<Properties>
  <Property name="PCU_CACHE_ENABLED" type="boolean" default="true">
    Activer/d√©sactiver le syst√®me de cache entier
  </Property>
  <Property name="PCU_CACHE_TTL" type="number" default="3600000">
    TTL de cache par d√©faut en millisecondes
  </Property>
  <Property name="PCU_CACHE_MAX_SIZE" type="number" default="52428800">
    Taille totale maximale du cache en octets (50MB par d√©faut)
  </Property>
  <Property name="PCU_CACHE_MAX_ENTRIES" type="number" default="10000">
    Nombre maximum d'entr√©es de cache
  </Property>
  <Property name="PCU_CACHE_DIR" type="string" default="~/.pcu/cache">
    Chemin du r√©pertoire de cache personnalis√©
  </Property>
  <Property name="PCU_CACHE_PERSIST" type="boolean" default="true">
    Activer la persistance disque pour les caches
  </Property>
</Properties>

#### Param√®tres de fichier de configuration

```json
{
  "cache": {
    "enabled": true,
    "ttl": 3600000,
    "maxSize": 52428800,
    "maxEntries": 10000,
    "persistToDisk": true,
    "cacheDir": "~/.pcu/cache",
    "registry": {
      "ttl": 3600000,
      "maxSize": 10485760,
      "maxEntries": 500
    },
    "workspace": {
      "ttl": 300000,
      "maxSize": 5242880,
      "maxEntries": 200,
      "persistToDisk": false
    }
  }
}
```

### Commandes de gestion de cache

<CodeGroup>

```bash {{ title: 'Statut du cache' }}
# Voir les statistiques de cache (via mode verbose)
pcu check --verbose
# Montre : Cache hits: 85%, Size: 15.2MB, Entries: 342
```

```bash {{ title: 'Effacer le cache' }}
# Effacer tous les caches
rm -rf ~/.pcu/cache

# Effacer type de cache sp√©cifique
rm -rf ~/.pcu/cache/registry
rm -rf ~/.pcu/cache/workspace

# D√©sactiver le cache pour une seule commande
PCU_CACHE_ENABLED=false pcu check
```

</CodeGroup>

### Performance du cache

#### Fonctionnalit√©s d'optimisation

- **√âviction LRU** : Les √©l√©ments utilis√©s le moins r√©cemment sont supprim√©s en premier
- **Nettoyage automatique** : Les entr√©es expir√©es sont supprim√©es toutes les 5 minutes
- **Surveillance de taille** : √âviction automatique quand les limites de taille sont d√©pass√©es
- **Traitement parall√®le** : Les op√©rations de cache ne bloquent pas le thread principal

#### B√©n√©fices de performance

- **Requ√™tes de registre** : 60-90% de r√©duction des appels au registre NPM
- **Analyse d'espace de travail** : 80-95% plus rapide sur ex√©cutions r√©p√©t√©es
- **D√©pendance r√©seau** : D√©pendance r√©duite √† la connectivit√© r√©seau
- **Temps de d√©marrage** : 2-5x plus rapide au d√©marrage pour op√©rations subs√©quentes
